=== RUN   TestBackends
=== RUN   TestBackends/backend=docker
    e2e_backend_test.go:24: Configuring docker backend...
    e2e_backend_test.go:24: Configured docker backend.
    e2e_backend_test.go:25: Starting ContainerSSH...
    e2e_backend_test.go:25: Allocating port 33185 for test TestBackends/backend=docker for auth server
    e2e_backend_test.go:25: Allocating port 37465 for test TestBackends/backend=docker for ContainerSSH
    server.go:22: info	The authentication server is now available at http://127.0.0.1:33185
    e2e_backend_test.go:25: ContainerSSH is now running.
    e2e_backend_test.go:25: Started ContainerSSH.
    e2e_backend_test.go:26: Logging in via SSH...
    e2e_backend_test.go:26: SSH login successful.
=== RUN   TestBackends/backend=docker/CommandExecution
    e2e_backend_test.go:29: Starting a new session channel...
    e2e_backend_test.go:29: Started a new session channel.
    e2e_backend_test.go:30: Starting program echo 'Hello world!' && sleep 3 ...
    e2e_backend_test.go:30: Started program.
    e2e_backend_test.go:31: Waiting for output...
    e2e_backend_test.go:31: Output check complete.
    e2e_backend_test.go:32: Closing channel...
    e2e_backend_test.go:32: Closed channel.
=== RUN   TestBackends/backend=docker/Shell
    e2e_backend_test.go:36: Starting a new session channel...
    e2e_backend_test.go:36: Started a new session channel.
    e2e_backend_test.go:37: Starting shell...
    e2e_backend_test.go:37: Started shell.
    e2e_backend_test.go:38: Sending stdin data...
    e2e_backend_test.go:38: Sent stdin data.
    e2e_backend_test.go:39: Waiting for output...
    e2e_backend_test.go:39: Output check complete.
    e2e_backend_test.go:40: Sending stdin data...
    e2e_backend_test.go:40: Sent stdin data.
    e2e_backend_test.go:41: Closing channel...
    e2e_backend_test.go:41: Closed channel.
=== RUN   TestBackends/backend=kubernetes
    e2e_backend_test.go:24: Configuring kubernetes backend...
--- FAIL: TestBackends (5.02s)
    --- PASS: TestBackends/backend=docker (5.02s)
        --- PASS: TestBackends/backend=docker/CommandExecution (1.07s)
        --- PASS: TestBackends/backend=docker/Shell (1.17s)
    --- FAIL: TestBackends/backend=kubernetes (0.00s)
panic: runtime error: index out of range [0] with length 0 [recovered]
	panic: runtime error: index out of range [0] with length 0

goroutine 110 [running]:
testing.tRunner.func1.2({0x1900a60, 0xc00012c780})
	/usr/local/lib/go/src/testing/testing.go:1209 +0x24e
testing.tRunner.func1()
	/usr/local/lib/go/src/testing/testing.go:1212 +0x218
panic({0x1900a60, 0xc00012c780})
	/usr/local/lib/go/src/runtime/panic.go:1038 +0x215
github.com/containerssh/libcontainerssh/internal/test.kubeConfig.getContext({{0xc0006350b0, 0x2}, {0x0, 0x0, 0x0}, {0x0, 0x0, 0x0}, {0x0, 0x0}, ...}, ...)
	/home/janosdebugs/GolandProjects/libcontainerssh/internal/test/kubernetes.go:308 +0xe5
github.com/containerssh/libcontainerssh/internal/test.kubeConfig.getUser({{0xc0006350b0, 0x2}, {0x0, 0x0, 0x0}, {0x0, 0x0, 0x0}, {0x0, 0x0}, ...}, ...)
	/home/janosdebugs/GolandProjects/libcontainerssh/internal/test/kubernetes.go:334 +0xa5
github.com/containerssh/libcontainerssh/internal/test.Kubernetes(0xc0005e4680)
	/home/janosdebugs/GolandProjects/libcontainerssh/internal/test/kubernetes.go:47 +0x225
github.com/containerssh/libcontainerssh_test.(*testContext).ConfigureBackend(0xc000014600, {0x19f9c43, 0xa})
	/home/janosdebugs/GolandProjects/libcontainerssh/e2e_framework_test.go:172 +0x325
github.com/containerssh/libcontainerssh_test.testBackend({0x1dbeb20, 0xc000014600}, {0x19f9c43, 0xc000594f60})
	/home/janosdebugs/GolandProjects/libcontainerssh/e2e_backend_test.go:24 +0x36
github.com/containerssh/libcontainerssh_test.TestBackends.func1(0xc000802240)
	/home/janosdebugs/GolandProjects/libcontainerssh/e2e_backend_test.go:16 +0x39
testing.tRunner(0xc0005e4680, 0xc000245470)
	/usr/local/lib/go/src/testing/testing.go:1259 +0x102
created by testing.(*T).Run
	/usr/local/lib/go/src/testing/testing.go:1306 +0x35a
FAIL	github.com/containerssh/libcontainerssh	5.035s
?   	github.com/containerssh/libcontainerssh/auditlog/codec	[no test files]
?   	github.com/containerssh/libcontainerssh/auditlog/message	[no test files]
?   	github.com/containerssh/libcontainerssh/auditlog/storage	[no test files]
?   	github.com/containerssh/libcontainerssh/auth	[no test files]
=== RUN   ExampleNewServer
--- PASS: ExampleNewServer (30.00s)
PASS
ok  	github.com/containerssh/libcontainerssh/auth/webhook	30.007s
?   	github.com/containerssh/libcontainerssh/cmd/containerssh	[no test files]
?   	github.com/containerssh/libcontainerssh/cmd/containerssh-auditlog-decoder	[no test files]
?   	github.com/containerssh/libcontainerssh/cmd/containerssh-testauthconfigserver	[no test files]
?   	github.com/containerssh/libcontainerssh/cmd/generate-message-codes	[no test files]
=== RUN   TestJSONDecode
--- PASS: TestJSONDecode (0.00s)
=== RUN   TestJSONDecodeNumeric
--- PASS: TestJSONDecodeNumeric (0.00s)
=== RUN   TestYAMLDecode
--- PASS: TestYAMLDecode (0.00s)
=== RUN   TestYAMLDecodeNumeric
--- PASS: TestYAMLDecodeNumeric (0.00s)
=== RUN   TestJSONEncode
--- PASS: TestJSONEncode (0.00s)
=== RUN   TestYAMLEncode
--- PASS: TestYAMLEncode (0.00s)
=== RUN   TestDefault
--- PASS: TestDefault (0.00s)
PASS
ok  	github.com/containerssh/libcontainerssh/config	0.003s
=== RUN   ExampleNewServer
--- PASS: ExampleNewServer (30.00s)
PASS
ok  	github.com/containerssh/libcontainerssh/config/webhook	30.004s
=== RUN   TestTextMarshal
=== RUN   TestTextMarshal/int
=== RUN   TestTextMarshal/int8
=== RUN   TestTextMarshal/int16
=== RUN   TestTextMarshal/int32
=== RUN   TestTextMarshal/int64
=== RUN   TestTextMarshal/uint
=== RUN   TestTextMarshal/uint8
=== RUN   TestTextMarshal/uint16
=== RUN   TestTextMarshal/uint32
=== RUN   TestTextMarshal/uint64
=== RUN   TestTextMarshal/string
=== RUN   TestTextMarshal/testData
=== RUN   TestTextMarshal/#00
--- PASS: TestTextMarshal (0.00s)
    --- PASS: TestTextMarshal/int (0.00s)
    --- PASS: TestTextMarshal/int8 (0.00s)
    --- PASS: TestTextMarshal/int16 (0.00s)
    --- PASS: TestTextMarshal/int32 (0.00s)
    --- PASS: TestTextMarshal/int64 (0.00s)
    --- PASS: TestTextMarshal/uint (0.00s)
    --- PASS: TestTextMarshal/uint8 (0.00s)
    --- PASS: TestTextMarshal/uint16 (0.00s)
    --- PASS: TestTextMarshal/uint32 (0.00s)
    --- PASS: TestTextMarshal/uint64 (0.00s)
    --- PASS: TestTextMarshal/string (0.00s)
    --- PASS: TestTextMarshal/testData (0.00s)
    --- PASS: TestTextMarshal/#00 (0.00s)
=== RUN   TestUnencrypted
    integration_test.go:79: Allocating port 36751 for test TestUnencrypted for config server
    client_impl.go:115: debug	HTTP POST request to http://127.0.0.1:36751/
    client_impl.go:130: debug	HTTP response with status 200
--- PASS: TestUnencrypted (0.00s)
=== RUN   TestUnencryptedFailure
    integration_test.go:79: Allocating port 34665 for test TestUnencryptedFailure for config server
    client_impl.go:115: debug	HTTP POST request to http://127.0.0.1:34665/
    client_impl.go:130: debug	HTTP response with status 400
--- PASS: TestUnencryptedFailure (0.00s)
=== RUN   TestEncrypted
    integration_test.go:79: Allocating port 43723 for test TestEncrypted for config server
    client_impl.go:115: debug	HTTP POST request to https://127.0.0.1:43723/
    client_impl.go:130: debug	HTTP response with status 200
--- PASS: TestEncrypted (1.84s)
=== RUN   TestMutuallyAuthenticated
    integration_test.go:79: Allocating port 34319 for test TestMutuallyAuthenticated for config server
    client_impl.go:115: debug	HTTP POST request to https://127.0.0.1:34319/
    client_impl.go:130: debug	HTTP response with status 200
--- PASS: TestMutuallyAuthenticated (2.44s)
=== RUN   TestMutuallyAuthenticatedFailure
    integration_test.go:79: Allocating port 35325 for test TestMutuallyAuthenticatedFailure for config server
    client_impl.go:115: debug	HTTP POST request to https://127.0.0.1:8080
    client_impl.go:125: debug	HTTP POST request to https://127.0.0.1:8080 failed (Post "https://127.0.0.1:8080": dial tcp 127.0.0.1:8080: connect: connection refused)
--- PASS: TestMutuallyAuthenticatedFailure (2.32s)
PASS
ok  	github.com/containerssh/libcontainerssh/http	6.610s
=== RUN   TestDecodingOldAuditLogs
=== RUN   TestDecodingOldAuditLogs/0-4-0
--- PASS: TestDecodingOldAuditLogs (0.00s)
    --- PASS: TestDecodingOldAuditLogs/0-4-0 (0.00s)
=== RUN   TestConnect
--- PASS: TestConnect (0.00s)
=== RUN   TestAuth
--- PASS: TestAuth (0.00s)
PASS
ok  	github.com/containerssh/libcontainerssh/internal/auditlog	0.006s
?   	github.com/containerssh/libcontainerssh/internal/auditlog/codec	[no test files]
=== RUN   TestHeader
--- PASS: TestHeader (0.00s)
=== RUN   TestOutput
--- PASS: TestOutput (0.00s)
PASS
ok  	github.com/containerssh/libcontainerssh/internal/auditlog/codec/asciinema	0.003s
=== RUN   TestTypeConnect
--- PASS: TestTypeConnect (0.00s)
=== RUN   TestTypeDisconnect
--- PASS: TestTypeDisconnect (0.00s)
=== RUN   TestTypeAuthPassword
--- PASS: TestTypeAuthPassword (0.00s)
=== RUN   TestTypeAuthPasswordSuccessful
--- PASS: TestTypeAuthPasswordSuccessful (0.00s)
=== RUN   TestTypeAuthPasswordFailed
--- PASS: TestTypeAuthPasswordFailed (0.00s)
=== RUN   TestTypeAuthPasswordBackendError
--- PASS: TestTypeAuthPasswordBackendError (0.00s)
=== RUN   TestTypeAuthPubKey
--- PASS: TestTypeAuthPubKey (0.00s)
=== RUN   TestTypeAuthPubKeySuccessful
--- PASS: TestTypeAuthPubKeySuccessful (0.00s)
=== RUN   TestTypeAuthPubKeyFailed
--- PASS: TestTypeAuthPubKeyFailed (0.00s)
=== RUN   TestTypeAuthPubKeyBackendError
--- PASS: TestTypeAuthPubKeyBackendError (0.00s)
=== RUN   TestTypeAuthKeyboardInteractiveChallenge
--- PASS: TestTypeAuthKeyboardInteractiveChallenge (0.00s)
=== RUN   TestTypeAuthKeyboardInteractiveAnswer
--- PASS: TestTypeAuthKeyboardInteractiveAnswer (0.00s)
=== RUN   TestTypeAuthKeyboardInteractiveFailed
--- PASS: TestTypeAuthKeyboardInteractiveFailed (0.00s)
=== RUN   TestTypeAuthKeyboardInteractiveBackendFailed
--- PASS: TestTypeAuthKeyboardInteractiveBackendFailed (0.00s)
=== RUN   TestTypeGlobalRequestUnknown
--- PASS: TestTypeGlobalRequestUnknown (0.00s)
=== RUN   TestTypeNewChannel
--- PASS: TestTypeNewChannel (0.00s)
=== RUN   TestTypeNewChannelFailed
--- PASS: TestTypeNewChannelFailed (0.00s)
=== RUN   TestTypeNewChannelSuccessful
--- PASS: TestTypeNewChannelSuccessful (0.00s)
=== RUN   TestTypeChannelRequestUnknownType
--- PASS: TestTypeChannelRequestUnknownType (0.00s)
=== RUN   TestTypeChannelRequestDecodeFailed
--- PASS: TestTypeChannelRequestDecodeFailed (0.00s)
=== RUN   TestTypeChannelRequestSetEnv
--- PASS: TestTypeChannelRequestSetEnv (0.00s)
=== RUN   TestTypeChannelRequestExec
--- PASS: TestTypeChannelRequestExec (0.00s)
=== RUN   TestTypeChannelRequestPty
--- PASS: TestTypeChannelRequestPty (0.00s)
=== RUN   TestTypeChannelRequestShell
--- PASS: TestTypeChannelRequestShell (0.00s)
=== RUN   TestTypeChannelRequestSignal
--- PASS: TestTypeChannelRequestSignal (0.00s)
=== RUN   TestTypeChannelRequestSubsystem
--- PASS: TestTypeChannelRequestSubsystem (0.00s)
=== RUN   TestTypeChannelRequestWindow
--- PASS: TestTypeChannelRequestWindow (0.00s)
=== RUN   TestTypeChannelExitSignal
--- PASS: TestTypeChannelExitSignal (0.00s)
=== RUN   TestTypeChannelExit
--- PASS: TestTypeChannelExit (0.00s)
=== RUN   TestTypeChannelWriteClose
--- PASS: TestTypeChannelWriteClose (0.00s)
=== RUN   TestTypeChannelClose
--- PASS: TestTypeChannelClose (0.00s)
PASS
ok  	github.com/containerssh/libcontainerssh/internal/auditlog/codec/binary	0.008s
?   	github.com/containerssh/libcontainerssh/internal/auditlog/codec/none	[no test files]
?   	github.com/containerssh/libcontainerssh/internal/auditlog/generate/format	[no test files]
?   	github.com/containerssh/libcontainerssh/internal/auditlog/storage	[no test files]
?   	github.com/containerssh/libcontainerssh/internal/auditlog/storage/file	[no test files]
?   	github.com/containerssh/libcontainerssh/internal/auditlog/storage/none	[no test files]
=== RUN   TestSmallUpload
{"status":"Pulling from minio/minio","id":"latest"}
{"status":"Digest: sha256:3755b00abde3ec763272d3fed1f4f4130bcbd56bc1fddc6e134249413d267fd8"}
{"status":"Status: Image is up to date for minio/minio:latest"}
    upload.go:82: debug	processing single upload for audit log test...
    upload.go:100: debug	single upload complete for audit log test
--- PASS: TestSmallUpload (7.10s)
=== RUN   TestLargeUpload
{"status":"Pulling from minio/minio","id":"latest"}
{"status":"Digest: sha256:3755b00abde3ec763272d3fed1f4f4130bcbd56bc1fddc6e134249413d267fd8"}
{"status":"Status: Image is up to date for minio/minio:latest"}
    upload.go:14: debug	initializing multipart upload for audit log test...
    upload.go:43: debug	uploading part 0 of audit log test (part size 5242880 bytes)...
    upload.go:71: debug	completed upload of part 0 of audit log test
    upload.go:43: debug	uploading part 1 of audit log test (part size 5242880 bytes)...
    upload.go:71: debug	completed upload of part 1 of audit log test
    upload.go:43: debug	uploading part 2 of audit log test (part size 5242880 bytes)...
    upload.go:71: debug	completed upload of part 2 of audit log test
    upload.go:43: debug	uploading part 3 of audit log test (part size 5242880 bytes)...
    upload.go:71: debug	completed upload of part 3 of audit log test
    upload.go:43: debug	uploading part 4 of audit log test (part size 4028480 bytes)...
    upload.go:71: debug	completed upload of part 4 of audit log test
    upload.go:105: debug	finalizing multipart upload for audit log test...
    upload.go:125: debug	finalizing multipart upload complete for audit log test
--- PASS: TestLargeUpload (9.39s)
PASS
ok  	github.com/containerssh/libcontainerssh/internal/auditlog/storage/s3	16.495s
=== RUN   TestKeyboardInteractiveAuthentication
    NewTestServer.go:20: Allocating port 34841 for test TestKeyboardInteractiveAuthentication for SSH
    serverImpl.go:75: info	SSH server running on 127.0.0.1:34841
    testClientImpl.go:21: debug	Connecting SSH server...
    serverImpl.go:456: debug	Client connected
    serverImpl.go:217: info	Keyboard-interactive authentication for user test successful.
    serverImpl.go:479: debug	SSH handshake successful
    testClientConnectionImpl.go:46: debug	Closing connection...
    serverImpl.go:487: debug	Client disconnected
--- PASS: TestKeyboardInteractiveAuthentication (1.85s)
=== RUN   TestConnectMessages
    NewTestServer.go:20: Allocating port 40483 for test TestConnectMessages for SSH
    serverImpl.go:75: info	SSH server running on 127.0.0.1:40483
    testClientImpl.go:21: debug	Connecting SSH server...
    serverImpl.go:456: debug	Client connected
    serverImpl.go:217: info	Password authentication for user test successful.
    serverImpl.go:479: debug	SSH handshake successful
    testClientConnectionImpl.go:23: debug	Opening session channel..
    serverImpl.go:602: debug	New SSH channel
    testClientSessionImpl.go:172: debug	Executing shell...
    serverImpl.go:697: debug	shell channel request from client
    serverImpl.go:720: debug	shell channel request from client successful
    testClientSessionImpl.go:196: debug	Writing to stdin: Check 1, 2...
    testClientSessionImpl.go:28: debug	Reading remaining bytes from stdout...
    testClientConnectionImpl.go:46: debug	Closing connection...
    serverImpl.go:487: debug	Client disconnected
    channelWrapper.go:52: debug	Program exited with status 0
--- PASS: TestConnectMessages (2.51s)
PASS
ok  	github.com/containerssh/libcontainerssh/internal/auditlogintegration	4.373s
=== RUN   TestPasswordDisabled
    client_test.go:22: Allocating port 41539 for test TestPasswordDisabled for auth server
    client_http.go:81: debug	Password authentication is disabled.
--- PASS: TestPasswordDisabled (0.00s)
=== RUN   TestPubKeyDisabled
    client_http.go:110: debug	Public key authentication is disabled.
--- PASS: TestPubKeyDisabled (0.00s)
=== RUN   TestAuth
    integration_test.go:70: info	FYI: errors during this test are expected as we test against error cases.
=== RUN   TestAuth/subpath_empty
    integration_test.go:125: Allocating port 41091 for test TestAuth/subpath_empty for auth server
=== CONT  TestAuth
    server.go:22: info	The authentication server is now available at http://127.0.0.1:41091
    client_http.go:182: debug	Password authentication request
    client_impl.go:115: debug	HTTP POST request to http://127.0.0.1:41091/password
    client_impl.go:130: debug	HTTP response with status 200
    client_http.go:257: debug	Password authentication successful
    client_http.go:182: debug	Password authentication request
    client_impl.go:115: debug	HTTP POST request to http://127.0.0.1:41091/password
    client_impl.go:130: debug	HTTP response with status 200
    client_http.go:266: debug	Password authentication failed
    client_http.go:182: debug	Password authentication request
    client_impl.go:115: debug	HTTP POST request to http://127.0.0.1:41091/password
    handler_impl.go:53: debug	failed to execute password request (database error)
    client_impl.go:130: debug	HTTP response with status 500
    client_http.go:222: debug	Password authentication request to backend failed, retrying in 10 seconds (auth server responded with an invalid status code: 500)
    client_http.go:211: error	Backend request for password authentication failed, giving up (auth server responded with an invalid status code: 500)
    client_http.go:182: debug	Public key authentication request
    client_impl.go:115: debug	HTTP POST request to http://127.0.0.1:41091/pubkey
    client_impl.go:130: debug	HTTP response with status 200
    client_http.go:257: debug	Public key authentication successful
    client_http.go:182: debug	Public key authentication request
    client_impl.go:115: debug	HTTP POST request to http://127.0.0.1:41091/pubkey
    client_impl.go:130: debug	HTTP response with status 200
    client_http.go:266: debug	Public key authentication failed
    client_http.go:182: debug	Public key authentication request
    client_impl.go:115: debug	HTTP POST request to http://127.0.0.1:41091/pubkey
    handler_impl.go:88: debug	failed to execute public key request (database error)
    client_impl.go:130: debug	HTTP response with status 500
    client_http.go:222: debug	Public key authentication request to backend failed, retrying in 10 seconds (auth server responded with an invalid status code: 500)
    client_http.go:211: error	Backend request for public key authentication failed, giving up (auth server responded with an invalid status code: 500)
=== RUN   TestAuth/subpath_auth
    integration_test.go:125: Allocating port 42349 for test TestAuth/subpath_auth for auth server
=== CONT  TestAuth
    server.go:22: info	The authentication server is now available at http://127.0.0.1:42349
    client_http.go:182: debug	Password authentication request
    client_impl.go:115: debug	HTTP POST request to http://127.0.0.1:42349/auth/password
    client_impl.go:130: debug	HTTP response with status 200
    client_http.go:257: debug	Password authentication successful
    client_http.go:182: debug	Password authentication request
    client_impl.go:115: debug	HTTP POST request to http://127.0.0.1:42349/auth/password
    client_impl.go:130: debug	HTTP response with status 200
    client_http.go:266: debug	Password authentication failed
    client_http.go:182: debug	Password authentication request
    client_impl.go:115: debug	HTTP POST request to http://127.0.0.1:42349/auth/password
    handler_impl.go:53: debug	failed to execute password request (database error)
    client_impl.go:130: debug	HTTP response with status 500
    client_http.go:222: debug	Password authentication request to backend failed, retrying in 10 seconds (auth server responded with an invalid status code: 500)
    client_http.go:211: error	Backend request for password authentication failed, giving up (auth server responded with an invalid status code: 500)
    client_http.go:182: debug	Public key authentication request
    client_impl.go:115: debug	HTTP POST request to http://127.0.0.1:42349/auth/pubkey
    client_impl.go:130: debug	HTTP response with status 200
    client_http.go:257: debug	Public key authentication successful
    client_http.go:182: debug	Public key authentication request
    client_impl.go:115: debug	HTTP POST request to http://127.0.0.1:42349/auth/pubkey
    client_impl.go:130: debug	HTTP response with status 200
    client_http.go:266: debug	Public key authentication failed
    client_http.go:182: debug	Public key authentication request
    client_impl.go:115: debug	HTTP POST request to http://127.0.0.1:42349/auth/pubkey
    handler_impl.go:88: debug	failed to execute public key request (database error)
    client_impl.go:130: debug	HTTP response with status 500
    client_http.go:222: debug	Public key authentication request to backend failed, retrying in 10 seconds (auth server responded with an invalid status code: 500)
    client_http.go:211: error	Backend request for public key authentication failed, giving up (auth server responded with an invalid status code: 500)
--- PASS: TestAuth (8.02s)
    --- PASS: TestAuth/subpath_empty (4.01s)
    --- PASS: TestAuth/subpath_auth (4.01s)
PASS
ok  	github.com/containerssh/libcontainerssh/internal/auth	8.028s
?   	github.com/containerssh/libcontainerssh/internal/auth/oauth2	[no test files]
=== RUN   TestAuthentication
    integration_test.go:28: Allocating port 46107 for test TestAuthentication for auth server
    server.go:22: info	The authentication server is now available at http://127.0.0.1:46107
    serverImpl.go:75: info	SSH server running on 0.0.0.0:2222
    serverImpl.go:456: debug	Client connected
    client_http.go:182: debug	Password authentication request
    client_impl.go:115: debug	HTTP POST request to http://127.0.0.1:46107/password
    client_impl.go:130: debug	HTTP response with status 200
    client_http.go:257: debug	Password authentication successful
    serverImpl.go:217: info	Password authentication for user foo successful.
    serverImpl.go:479: debug	SSH handshake successful
    serverImpl.go:487: debug	Client disconnected
    serverImpl.go:456: debug	Client connected
    client_http.go:182: debug	Password authentication request
    client_impl.go:115: debug	HTTP POST request to http://127.0.0.1:46107/password
    client_impl.go:130: debug	HTTP response with status 200
    client_http.go:266: debug	Password authentication failed
    serverImpl.go:191: info	Password authentication for user foo failed.
    serverImpl.go:469: info	SSH handshake failed ([ssh: no auth passed yet, Password authentication for user foo failed.])
    serverImpl.go:472: debug	Client disconnected
--- PASS: TestAuthentication (0.23s)
PASS
ok  	github.com/containerssh/libcontainerssh/internal/authintegration	0.242s
=== RUN   TestSimpleContainerLaunch
    integration_test.go:25: Allocating port 36611 for test TestSimpleContainerLaunch for auth server
    integration_test.go:26: Allocating port 45963 for test TestSimpleContainerLaunch for SSH
    serverImpl.go:75: info	SSH server running on 127.0.0.1:45963
    serverImpl.go:456: debug	Client connected
    serverImpl.go:217: info	Password authentication for user foo successful.
    serverImpl.go:479: debug	SSH handshake successful
    serverImpl.go:602: debug	New SSH channel
    serverImpl.go:697: debug	exec channel request from client
    serverImpl.go:720: debug	exec channel request from client successful
    channelWrapper.go:52: debug	Program exited with status 0
    serverImpl.go:487: debug	Client disconnected
--- PASS: TestSimpleContainerLaunch (13.18s)
PASS
ok  	github.com/containerssh/libcontainerssh/internal/backend	13.188s
=== RUN   TestOperatorCompatibility
--- PASS: TestOperatorCompatibility (0.00s)
=== RUN   Test04Compatibility
    compatibility_test.go:21: info	FYI: any deprecation notices in this test are intentional.
    compat.go:14: warning	You are using the 'auth.url' option deprecated in ContainerSSH 0.5. Please use the new 'auth -> webhook -> url' option. See https://containerssh.io/deprecations/authurl for details.
--- PASS: Test04Compatibility (0.00s)
=== RUN   TestDockerRunRemoval
--- PASS: TestDockerRunRemoval (0.00s)
=== RUN   TestKubeRunRemoval
--- PASS: TestKubeRunRemoval (0.00s)
=== RUN   TestYAMLSerialization
--- PASS: TestYAMLSerialization (0.00s)
=== RUN   TestJSONSerialization
--- PASS: TestJSONSerialization (0.00s)
=== RUN   TestHTTP
    http_test.go:22: Allocating port 45387 for test TestHTTP for HTTP
    server.go:26: info	The configuration server is now available at http://127.0.0.1:45387
    client_impl.go:90: debug	Configuration request
    client_impl.go:115: debug	HTTP POST request to http://127.0.0.1:45387
    client_impl.go:130: debug	HTTP response with status 200
    client_impl.go:155: debug	User-specific configuration received
--- PASS: TestHTTP (0.00s)
=== RUN   TestSaveLoadYAML
--- PASS: TestSaveLoadYAML (0.00s)
=== RUN   TestSaveLoadJSON
--- PASS: TestSaveLoadJSON (0.00s)
=== RUN   TestLoadIssue209
--- PASS: TestLoadIssue209 (0.00s)
=== RUN   TestLoadSave
--- PASS: TestLoadSave (0.00s)
=== RUN   TestListenDefault
--- PASS: TestListenDefault (0.00s)
PASS
ok  	github.com/containerssh/libcontainerssh/internal/config	0.018s
=== RUN   TestConformance
=== RUN   TestConformance/session
=== RUN   TestConformance/session/singleProgramShouldRun
    conformance_test.go:44: Allocating port 39697 for test TestConformance/session/singleProgramShouldRun for client
    NewTestServer.go:20: Allocating port 45775 for test TestConformance/session/singleProgramShouldRun for SSH
    serverImpl.go:75: info	SSH server running on 127.0.0.1:45775
    testClientImpl.go:21: debug	Connecting SSH server...
    serverImpl.go:456: debug	Client connected
    serverImpl.go:217: info	Password authentication for user test successful.
    handler_network.go:90: debug	Checking if an image pull is needed...
    handler_network.go:102: debug	Image pull policy is "IfNotPresent" and the image name is "latest", pulling image.
    docker_impl.go:118: debug	Pulling image docker.io/containerssh/containerssh-guest-image...
    testClientConnectionImpl.go:23: debug	Opening session channel..
    serverImpl.go:479: debug	SSH handshake successful
    serverImpl.go:602: debug	New SSH channel
    testClientSessionImpl.go:180: debug	Executing program 'echo "Hello world!"'...
    serverImpl.go:697: debug	exec channel request from client
    docker_impl.go:173: debug	Creating container...
    docker_impl.go:277: debug	attaching to container...
    docker_impl.go:328: debug	Starting container...
    serverImpl.go:720: debug	exec channel request from client successful
    testClientSessionImpl.go:219: debug	Waiting for the following string on stdout: Hello world!
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 1 bytes: H
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 2 bytes: He
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 3 bytes: Hel
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 4 bytes: Hell
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 5 bytes: Hello
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 6 bytes: Hello 
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 7 bytes: Hello w
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 8 bytes: Hello wo
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 9 bytes: Hello wor
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 10 bytes: Hello worl
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 11 bytes: Hello world
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 12 bytes: Hello world!
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 13 bytes: Hello world!
    testClientSessionImpl.go:251: debug	Waiting for session to finish.
    testClientSessionImpl.go:28: debug	Reading remaining bytes from stdout...
    docker_impl.go:1090: debug	Stopping container...
    channelWrapper.go:52: debug	Program exited with status 0
    testClientSessionImpl.go:48: debug	Reading remaining bytes from stderr...
    conformanceTestSuite.go:57: test complete
    testClientConnectionImpl.go:46: debug	Closing connection...
    serverImpl.go:487: debug	Client disconnected
=== RUN   TestConformance/session/settingEnvVariablesShouldWork
    conformance_test.go:44: Allocating port 40097 for test TestConformance/session/settingEnvVariablesShouldWork for client
    NewTestServer.go:20: Allocating port 45365 for test TestConformance/session/settingEnvVariablesShouldWork for SSH
    serverImpl.go:75: info	SSH server running on 127.0.0.1:45365
    testClientImpl.go:21: debug	Connecting SSH server...
    serverImpl.go:456: debug	Client connected
    serverImpl.go:217: info	Password authentication for user test successful.
    handler_network.go:90: debug	Checking if an image pull is needed...
    handler_network.go:102: debug	Image pull policy is "IfNotPresent" and the image name is "latest", pulling image.
    docker_impl.go:118: debug	Pulling image docker.io/containerssh/containerssh-guest-image...
    serverImpl.go:479: debug	SSH handshake successful
    testClientConnectionImpl.go:23: debug	Opening session channel..
    serverImpl.go:602: debug	New SSH channel
    testClientSessionImpl.go:153: debug	Setting env variable FOO=Hello world!...
    serverImpl.go:697: debug	env channel request from client
    serverImpl.go:720: debug	env channel request from client successful
    testClientSessionImpl.go:180: debug	Executing program 'echo "$FOO"'...
    serverImpl.go:697: debug	exec channel request from client
    docker_impl.go:173: debug	Creating container...
    docker_impl.go:277: debug	attaching to container...
    docker_impl.go:328: debug	Starting container...
    serverImpl.go:720: debug	exec channel request from client successful
    testClientSessionImpl.go:219: debug	Waiting for the following string on stdout: Hello world!
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 1 bytes: H
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 2 bytes: He
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 3 bytes: Hel
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 4 bytes: Hell
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 5 bytes: Hello
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 6 bytes: Hello 
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 7 bytes: Hello w
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 8 bytes: Hello wo
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 9 bytes: Hello wor
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 10 bytes: Hello worl
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 11 bytes: Hello world
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 12 bytes: Hello world!
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 13 bytes: Hello world!
    testClientSessionImpl.go:251: debug	Waiting for session to finish.
    testClientSessionImpl.go:28: debug	Reading remaining bytes from stdout...
    docker_impl.go:1090: debug	Stopping container...
    channelWrapper.go:52: debug	Program exited with status 0
    testClientSessionImpl.go:48: debug	Reading remaining bytes from stderr...
    conformanceTestSuite.go:104: test complete
    testClientConnectionImpl.go:46: debug	Closing connection...
    serverImpl.go:487: debug	Client disconnected
=== RUN   TestConformance/session/runningInteractiveShellShouldWork
    conformance_test.go:44: Allocating port 40099 for test TestConformance/session/runningInteractiveShellShouldWork for client
    NewTestServer.go:20: Allocating port 40283 for test TestConformance/session/runningInteractiveShellShouldWork for SSH
    serverImpl.go:75: info	SSH server running on 127.0.0.1:40283
    testClientImpl.go:21: debug	Connecting SSH server...
    serverImpl.go:456: debug	Client connected
    serverImpl.go:217: info	Password authentication for user test successful.
    handler_network.go:90: debug	Checking if an image pull is needed...
    handler_network.go:102: debug	Image pull policy is "IfNotPresent" and the image name is "latest", pulling image.
    docker_impl.go:118: debug	Pulling image docker.io/containerssh/containerssh-guest-image...
    serverImpl.go:479: debug	SSH handshake successful
    testClientConnectionImpl.go:23: debug	Opening session channel..
    serverImpl.go:602: debug	New SSH channel
    testClientSessionImpl.go:153: debug	Setting env variable foo=bar...
    serverImpl.go:697: debug	env channel request from client
    serverImpl.go:720: debug	env channel request from client successful
    testClientSessionImpl.go:163: debug	Requesting PTY for term xterm cols 80 rows 25...
    serverImpl.go:697: debug	pty-req channel request from client
    serverImpl.go:720: debug	pty-req channel request from client successful
    testClientSessionImpl.go:172: debug	Executing shell...
    serverImpl.go:697: debug	shell channel request from client
    docker_impl.go:173: debug	Creating container...
    docker_impl.go:277: debug	attaching to container...
    docker_impl.go:328: debug	Starting container...
    docker_impl.go:774: debug	Resizing window to 80x25
    serverImpl.go:720: debug	shell channel request from client successful
    testClientSessionImpl.go:28: debug	Reading remaining bytes from stdout...
    testClientSessionImpl.go:64: debug	Typing on stdin with sleep and read back: tput cols
    testClientSessionImpl.go:196: debug	Writing to stdin: t
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: p
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: u
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: t
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin:  
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: c
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: o
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: l
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: s
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: 
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:100: debug	Typing done.
    testClientSessionImpl.go:219: debug	Waiting for the following string on stdout: 80
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 1 bytes: 8
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 2 bytes: 80
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 3 bytes: 80
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 4 bytes: 80
    testClientSessionImpl.go:28: debug	Reading remaining bytes from stdout...
    testClientSessionImpl.go:64: debug	Typing on stdin with sleep and read back: tput lines
    testClientSessionImpl.go:196: debug	Writing to stdin: t
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: p
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: u
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: t
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin:  
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: l
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: i
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: n
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: e
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: s
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: 
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:100: debug	Typing done.
    testClientSessionImpl.go:219: debug	Waiting for the following string on stdout: 25
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 1 bytes: 2
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 2 bytes: 25
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 3 bytes: 25
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 4 bytes: 25
    testClientSessionImpl.go:28: debug	Reading remaining bytes from stdout...
    testClientSessionImpl.go:158: debug	Changing window to cols 120 rows 25...
    serverImpl.go:697: debug	window-change channel request from client
    docker_impl.go:774: debug	Resizing window to 120x25
    serverImpl.go:720: debug	window-change channel request from client successful
    testClientSessionImpl.go:28: debug	Reading remaining bytes from stdout...
    testClientSessionImpl.go:64: debug	Typing on stdin with sleep and read back: tput cols
    testClientSessionImpl.go:196: debug	Writing to stdin: t
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: p
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: u
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: t
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin:  
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: c
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: o
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: l
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: s
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: 
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:100: debug	Typing done.
    testClientSessionImpl.go:219: debug	Waiting for the following string on stdout: 120
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 1 bytes: 1
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 2 bytes: 12
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 3 bytes: 120
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 4 bytes: 120
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 5 bytes: 120
    testClientSessionImpl.go:28: debug	Reading remaining bytes from stdout...
    testClientSessionImpl.go:64: debug	Typing on stdin with sleep and read back: tput lines
    testClientSessionImpl.go:196: debug	Writing to stdin: t
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: p
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: u
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: t
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin:  
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: l
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: i
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: n
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: e
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: s
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: 
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:100: debug	Typing done.
    testClientSessionImpl.go:219: debug	Waiting for the following string on stdout: 25
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 1 bytes: 2
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 2 bytes: 25
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 3 bytes: 25
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 4 bytes: 25
    testClientSessionImpl.go:28: debug	Reading remaining bytes from stdout...
    testClientSessionImpl.go:64: debug	Typing on stdin with sleep and read back: echo "Hello world!"
    testClientSessionImpl.go:196: debug	Writing to stdin: e
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: c
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: h
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: o
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin:  
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: "
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: H
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: e
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: l
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: l
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: o
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin:  
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: w
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: o
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: r
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: l
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: d
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: !
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: "
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: 
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:100: debug	Typing done.
    testClientSessionImpl.go:219: debug	Waiting for the following string on stdout: Hello world!
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 1 bytes: H
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 2 bytes: He
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 3 bytes: Hel
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 4 bytes: Hell
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 5 bytes: Hello
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 6 bytes: Hello 
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 7 bytes: Hello w
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 8 bytes: Hello wo
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 9 bytes: Hello wor
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 10 bytes: Hello worl
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 11 bytes: Hello world
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 12 bytes: Hello world!
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 13 bytes: Hello world!
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 14 bytes: Hello world!
    testClientSessionImpl.go:28: debug	Reading remaining bytes from stdout...
    testClientSessionImpl.go:64: debug	Typing on stdin with sleep and read back: exit
    testClientSessionImpl.go:196: debug	Writing to stdin: e
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: x
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: i
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: t
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: 
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    docker_impl.go:1090: debug	Stopping container...
    testClientSessionImpl.go:100: debug	Typing done.
    testClientSessionImpl.go:251: debug	Waiting for session to finish.
    testClientSessionImpl.go:28: debug	Reading remaining bytes from stdout...
    channelWrapper.go:52: debug	Program exited with status 0
    testClientSessionImpl.go:48: debug	Reading remaining bytes from stderr...
    conformanceTestSuite.go:157: test complete
    testClientConnectionImpl.go:46: debug	Closing connection...
    serverImpl.go:487: debug	Client disconnected
=== RUN   TestConformance/session/reportingExitCodeShouldWork
    conformance_test.go:44: Allocating port 41707 for test TestConformance/session/reportingExitCodeShouldWork for client
    NewTestServer.go:20: Allocating port 42011 for test TestConformance/session/reportingExitCodeShouldWork for SSH
    serverImpl.go:75: info	SSH server running on 127.0.0.1:42011
    testClientImpl.go:21: debug	Connecting SSH server...
    serverImpl.go:456: debug	Client connected
    serverImpl.go:217: info	Password authentication for user test successful.
    handler_network.go:90: debug	Checking if an image pull is needed...
    handler_network.go:102: debug	Image pull policy is "IfNotPresent" and the image name is "latest", pulling image.
    docker_impl.go:118: debug	Pulling image docker.io/containerssh/containerssh-guest-image...
    testClientConnectionImpl.go:23: debug	Opening session channel..
    serverImpl.go:479: debug	SSH handshake successful
    serverImpl.go:602: debug	New SSH channel
    testClientSessionImpl.go:180: debug	Executing program 'exit 42'...
    serverImpl.go:697: debug	exec channel request from client
    docker_impl.go:173: debug	Creating container...
    docker_impl.go:277: debug	attaching to container...
    docker_impl.go:328: debug	Starting container...
    serverImpl.go:720: debug	exec channel request from client successful
    testClientSessionImpl.go:251: debug	Waiting for session to finish.
    testClientSessionImpl.go:28: debug	Reading remaining bytes from stdout...
    docker_impl.go:1090: debug	Stopping container...
    channelWrapper.go:52: debug	Program exited with status 42
    testClientSessionImpl.go:48: debug	Reading remaining bytes from stderr...
    conformanceTestSuite.go:227: test complete
    testClientConnectionImpl.go:46: debug	Closing connection...
    serverImpl.go:487: debug	Client disconnected
=== RUN   TestConformance/session/sendingSignalsShouldWork
    conformance_test.go:44: Allocating port 44433 for test TestConformance/session/sendingSignalsShouldWork for client
    NewTestServer.go:20: Allocating port 43525 for test TestConformance/session/sendingSignalsShouldWork for SSH
    serverImpl.go:75: info	SSH server running on 127.0.0.1:43525
    testClientImpl.go:21: debug	Connecting SSH server...
    serverImpl.go:456: debug	Client connected
    serverImpl.go:217: info	Password authentication for user test successful.
    handler_network.go:90: debug	Checking if an image pull is needed...
    handler_network.go:102: debug	Image pull policy is "IfNotPresent" and the image name is "latest", pulling image.
    docker_impl.go:118: debug	Pulling image docker.io/containerssh/containerssh-guest-image...
    serverImpl.go:479: debug	SSH handshake successful
    testClientConnectionImpl.go:23: debug	Opening session channel..
    serverImpl.go:602: debug	New SSH channel
    testClientSessionImpl.go:180: debug	Executing program '/usr/bin/containerssh-agent wait-signal --signal USR1 --message "USR1 received"'...
    serverImpl.go:697: debug	exec channel request from client
    docker_impl.go:173: debug	Creating container...
    docker_impl.go:277: debug	attaching to container...
    docker_impl.go:328: debug	Starting container...
    serverImpl.go:720: debug	exec channel request from client successful
    testClientSessionImpl.go:105: debug	Sending USR1 signal to process...
    testClientSessionImpl.go:219: debug	Waiting for the following string on stdout: USR1 received
    serverImpl.go:697: debug	signal channel request from client
    docker_impl.go:722: debug	Sending the USR1 signal to container...
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 1 bytes: U
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 2 bytes: US
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 3 bytes: USR
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 4 bytes: USR1
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 5 bytes: USR1 
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 6 bytes: USR1 r
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 7 bytes: USR1 re
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 8 bytes: USR1 rec
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 9 bytes: USR1 rece
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 10 bytes: USR1 recei
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 11 bytes: USR1 receiv
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 12 bytes: USR1 receive
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 13 bytes: USR1 received
    testClientSessionImpl.go:28: debug	Reading remaining bytes from stdout...
    serverImpl.go:720: debug	signal channel request from client successful
    docker_impl.go:1090: debug	Stopping container...
    channelWrapper.go:52: debug	Program exited with status 0
    testClientSessionImpl.go:251: debug	Waiting for session to finish.
    testClientSessionImpl.go:28: debug	Reading remaining bytes from stdout...
    testClientSessionImpl.go:48: debug	Reading remaining bytes from stderr...
    conformanceTestSuite.go:277: test complete
    testClientConnectionImpl.go:46: debug	Closing connection...
    serverImpl.go:487: debug	Client disconnected
=== RUN   TestConformance/connection
=== RUN   TestConformance/connection/singleProgramShouldRun
    conformance_test.go:44: Allocating port 39399 for test TestConformance/connection/singleProgramShouldRun for client
    NewTestServer.go:20: Allocating port 39627 for test TestConformance/connection/singleProgramShouldRun for SSH
    serverImpl.go:75: info	SSH server running on 127.0.0.1:39627
    testClientImpl.go:21: debug	Connecting SSH server...
    serverImpl.go:456: debug	Client connected
    serverImpl.go:217: info	Password authentication for user test successful.
    handler_network.go:90: debug	Checking if an image pull is needed...
    handler_network.go:102: debug	Image pull policy is "IfNotPresent" and the image name is "latest", pulling image.
    docker_impl.go:118: debug	Pulling image docker.io/containerssh/containerssh-guest-image...
    docker_impl.go:173: debug	Creating container...
    docker_impl.go:328: debug	Starting container...
    testClientConnectionImpl.go:23: debug	Opening session channel..
    serverImpl.go:479: debug	SSH handshake successful
    serverImpl.go:602: debug	New SSH channel
    testClientSessionImpl.go:180: debug	Executing program 'echo "Hello world!"'...
    serverImpl.go:697: debug	exec channel request from client
    docker_impl.go:451: debug	Creating and attaching to container exec...
    docker_impl.go:480: debug	Creating exec...
    docker_impl.go:545: debug	Attaching exec...
    serverImpl.go:720: debug	exec channel request from client successful
    testClientSessionImpl.go:219: debug	Waiting for the following string on stdout: Hello world!
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 1 bytes: H
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 2 bytes: He
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 3 bytes: Hel
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 4 bytes: Hell
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 5 bytes: Hello
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 6 bytes: Hello 
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 7 bytes: Hello w
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 8 bytes: Hello wo
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 9 bytes: Hello wor
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 10 bytes: Hello worl
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 11 bytes: Hello world
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 12 bytes: Hello world!
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 13 bytes: Hello world!
    testClientSessionImpl.go:251: debug	Waiting for session to finish.
    testClientSessionImpl.go:28: debug	Reading remaining bytes from stdout...
    docker_impl.go:1080: debug	Program exited with 0
    channelWrapper.go:52: debug	Program exited with status 0
    testClientSessionImpl.go:48: debug	Reading remaining bytes from stderr...
    conformanceTestSuite.go:57: test complete
    testClientConnectionImpl.go:46: debug	Closing connection...
    serverImpl.go:487: debug	Client disconnected
    docker_impl.go:376: debug	Removing container...
    docker_impl.go:394: debug	Container removed.
=== RUN   TestConformance/connection/settingEnvVariablesShouldWork
    conformance_test.go:44: Allocating port 42497 for test TestConformance/connection/settingEnvVariablesShouldWork for client
    NewTestServer.go:20: Allocating port 44361 for test TestConformance/connection/settingEnvVariablesShouldWork for SSH
    serverImpl.go:75: info	SSH server running on 127.0.0.1:44361
    testClientImpl.go:21: debug	Connecting SSH server...
    serverImpl.go:456: debug	Client connected
    serverImpl.go:217: info	Password authentication for user test successful.
    handler_network.go:90: debug	Checking if an image pull is needed...
    handler_network.go:102: debug	Image pull policy is "IfNotPresent" and the image name is "latest", pulling image.
    docker_impl.go:118: debug	Pulling image docker.io/containerssh/containerssh-guest-image...
    docker_impl.go:173: debug	Creating container...
    docker_impl.go:328: debug	Starting container...
    serverImpl.go:479: debug	SSH handshake successful
    testClientConnectionImpl.go:23: debug	Opening session channel..
    serverImpl.go:602: debug	New SSH channel
    testClientSessionImpl.go:153: debug	Setting env variable FOO=Hello world!...
    serverImpl.go:697: debug	env channel request from client
    serverImpl.go:720: debug	env channel request from client successful
    testClientSessionImpl.go:180: debug	Executing program 'echo "$FOO"'...
    serverImpl.go:697: debug	exec channel request from client
    docker_impl.go:451: debug	Creating and attaching to container exec...
    docker_impl.go:480: debug	Creating exec...
    docker_impl.go:545: debug	Attaching exec...
    serverImpl.go:720: debug	exec channel request from client successful
    testClientSessionImpl.go:219: debug	Waiting for the following string on stdout: Hello world!
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 1 bytes: H
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 2 bytes: He
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 3 bytes: Hel
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 4 bytes: Hell
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 5 bytes: Hello
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 6 bytes: Hello 
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 7 bytes: Hello w
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 8 bytes: Hello wo
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 9 bytes: Hello wor
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 10 bytes: Hello worl
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 11 bytes: Hello world
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 12 bytes: Hello world!
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 13 bytes: Hello world!
    testClientSessionImpl.go:251: debug	Waiting for session to finish.
    testClientSessionImpl.go:28: debug	Reading remaining bytes from stdout...
    docker_impl.go:1080: debug	Program exited with 0
    channelWrapper.go:52: debug	Program exited with status 0
    testClientSessionImpl.go:48: debug	Reading remaining bytes from stderr...
    conformanceTestSuite.go:104: test complete
    testClientConnectionImpl.go:46: debug	Closing connection...
    serverImpl.go:487: debug	Client disconnected
    docker_impl.go:376: debug	Removing container...
    docker_impl.go:394: debug	Container removed.
=== RUN   TestConformance/connection/runningInteractiveShellShouldWork
    conformance_test.go:44: Allocating port 38183 for test TestConformance/connection/runningInteractiveShellShouldWork for client
    NewTestServer.go:20: Allocating port 43981 for test TestConformance/connection/runningInteractiveShellShouldWork for SSH
    serverImpl.go:75: info	SSH server running on 127.0.0.1:43981
    testClientImpl.go:21: debug	Connecting SSH server...
    serverImpl.go:456: debug	Client connected
    serverImpl.go:217: info	Password authentication for user test successful.
    handler_network.go:90: debug	Checking if an image pull is needed...
    handler_network.go:102: debug	Image pull policy is "IfNotPresent" and the image name is "latest", pulling image.
    docker_impl.go:118: debug	Pulling image docker.io/containerssh/containerssh-guest-image...
    docker_impl.go:173: debug	Creating container...
    docker_impl.go:328: debug	Starting container...
    testClientConnectionImpl.go:23: debug	Opening session channel..
    serverImpl.go:479: debug	SSH handshake successful
    serverImpl.go:602: debug	New SSH channel
    testClientSessionImpl.go:153: debug	Setting env variable foo=bar...
    serverImpl.go:697: debug	env channel request from client
    serverImpl.go:720: debug	env channel request from client successful
    testClientSessionImpl.go:163: debug	Requesting PTY for term xterm cols 80 rows 25...
    serverImpl.go:697: debug	pty-req channel request from client
    serverImpl.go:720: debug	pty-req channel request from client successful
    testClientSessionImpl.go:172: debug	Executing shell...
    serverImpl.go:697: debug	shell channel request from client
    docker_impl.go:451: debug	Creating and attaching to container exec...
    docker_impl.go:480: debug	Creating exec...
    docker_impl.go:545: debug	Attaching exec...
    docker_impl.go:774: debug	Resizing window to 80x25
    serverImpl.go:720: debug	shell channel request from client successful
    testClientSessionImpl.go:28: debug	Reading remaining bytes from stdout...
    testClientSessionImpl.go:64: debug	Typing on stdin with sleep and read back: tput cols
    testClientSessionImpl.go:196: debug	Writing to stdin: t
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: p
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: u
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: t
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin:  
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: c
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: o
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: l
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: s
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: 
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:100: debug	Typing done.
    testClientSessionImpl.go:219: debug	Waiting for the following string on stdout: 80
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 1 bytes: 8
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 2 bytes: 80
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 3 bytes: 80
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 4 bytes: 80
    testClientSessionImpl.go:28: debug	Reading remaining bytes from stdout...
    testClientSessionImpl.go:64: debug	Typing on stdin with sleep and read back: tput lines
    testClientSessionImpl.go:196: debug	Writing to stdin: t
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: p
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: u
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: t
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin:  
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: l
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: i
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: n
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: e
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: s
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: 
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:100: debug	Typing done.
    testClientSessionImpl.go:219: debug	Waiting for the following string on stdout: 25
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 1 bytes: 2
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 2 bytes: 25
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 3 bytes: 25
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 4 bytes: 25
    testClientSessionImpl.go:28: debug	Reading remaining bytes from stdout...
    testClientSessionImpl.go:158: debug	Changing window to cols 120 rows 25...
    serverImpl.go:697: debug	window-change channel request from client
    docker_impl.go:774: debug	Resizing window to 120x25
    serverImpl.go:720: debug	window-change channel request from client successful
    testClientSessionImpl.go:28: debug	Reading remaining bytes from stdout...
    testClientSessionImpl.go:64: debug	Typing on stdin with sleep and read back: tput cols
    testClientSessionImpl.go:196: debug	Writing to stdin: t
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: p
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: u
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: t
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin:  
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: c
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: o
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: l
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: s
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: 
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:100: debug	Typing done.
    testClientSessionImpl.go:219: debug	Waiting for the following string on stdout: 120
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 1 bytes: 1
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 2 bytes: 12
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 3 bytes: 120
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 4 bytes: 120
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 5 bytes: 120
    testClientSessionImpl.go:28: debug	Reading remaining bytes from stdout...
    testClientSessionImpl.go:64: debug	Typing on stdin with sleep and read back: tput lines
    testClientSessionImpl.go:196: debug	Writing to stdin: t
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: p
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: u
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: t
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin:  
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: l
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: i
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: n
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: e
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: s
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: 
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:100: debug	Typing done.
    testClientSessionImpl.go:219: debug	Waiting for the following string on stdout: 25
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 1 bytes: 2
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 2 bytes: 25
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 3 bytes: 25
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 4 bytes: 25
    testClientSessionImpl.go:28: debug	Reading remaining bytes from stdout...
    testClientSessionImpl.go:64: debug	Typing on stdin with sleep and read back: echo "Hello world!"
    testClientSessionImpl.go:196: debug	Writing to stdin: e
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: c
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: h
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: o
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin:  
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: "
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: H
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: e
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: l
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: l
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: o
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin:  
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: w
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: o
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: r
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: l
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: d
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: !
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: "
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: 
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:100: debug	Typing done.
    testClientSessionImpl.go:219: debug	Waiting for the following string on stdout: Hello world!
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 1 bytes: H
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 2 bytes: He
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 3 bytes: Hel
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 4 bytes: Hell
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 5 bytes: Hello
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 6 bytes: Hello 
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 7 bytes: Hello w
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 8 bytes: Hello wo
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 9 bytes: Hello wor
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 10 bytes: Hello worl
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 11 bytes: Hello world
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 12 bytes: Hello world!
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 13 bytes: Hello world!
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 14 bytes: Hello world!
    testClientSessionImpl.go:28: debug	Reading remaining bytes from stdout...
    testClientSessionImpl.go:64: debug	Typing on stdin with sleep and read back: exit
    testClientSessionImpl.go:196: debug	Writing to stdin: e
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: x
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: i
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: t
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: 
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    docker_impl.go:1080: debug	Program exited with 0
    channelWrapper.go:52: debug	Program exited with status 0
    testClientSessionImpl.go:100: debug	Typing done.
    testClientSessionImpl.go:251: debug	Waiting for session to finish.
    testClientSessionImpl.go:28: debug	Reading remaining bytes from stdout...
    testClientSessionImpl.go:48: debug	Reading remaining bytes from stderr...
    conformanceTestSuite.go:157: test complete
    testClientConnectionImpl.go:46: debug	Closing connection...
    serverImpl.go:487: debug	Client disconnected
    docker_impl.go:376: debug	Removing container...
    docker_impl.go:394: debug	Container removed.
=== RUN   TestConformance/connection/reportingExitCodeShouldWork
    conformance_test.go:44: Allocating port 35179 for test TestConformance/connection/reportingExitCodeShouldWork for client
    NewTestServer.go:20: Allocating port 43373 for test TestConformance/connection/reportingExitCodeShouldWork for SSH
    serverImpl.go:75: info	SSH server running on 127.0.0.1:43373
    testClientImpl.go:21: debug	Connecting SSH server...
    serverImpl.go:456: debug	Client connected
    serverImpl.go:217: info	Password authentication for user test successful.
    handler_network.go:90: debug	Checking if an image pull is needed...
    handler_network.go:102: debug	Image pull policy is "IfNotPresent" and the image name is "latest", pulling image.
    docker_impl.go:118: debug	Pulling image docker.io/containerssh/containerssh-guest-image...
    docker_impl.go:173: debug	Creating container...
    docker_impl.go:328: debug	Starting container...
    serverImpl.go:479: debug	SSH handshake successful
    testClientConnectionImpl.go:23: debug	Opening session channel..
    serverImpl.go:602: debug	New SSH channel
    testClientSessionImpl.go:180: debug	Executing program 'exit 42'...
    serverImpl.go:697: debug	exec channel request from client
    docker_impl.go:451: debug	Creating and attaching to container exec...
    docker_impl.go:480: debug	Creating exec...
    docker_impl.go:545: debug	Attaching exec...
    serverImpl.go:720: debug	exec channel request from client successful
    testClientSessionImpl.go:251: debug	Waiting for session to finish.
    testClientSessionImpl.go:28: debug	Reading remaining bytes from stdout...
    docker_impl.go:1080: debug	Program exited with 42
    channelWrapper.go:52: debug	Program exited with status 42
    testClientSessionImpl.go:48: debug	Reading remaining bytes from stderr...
    conformanceTestSuite.go:227: test complete
    testClientConnectionImpl.go:46: debug	Closing connection...
    serverImpl.go:487: debug	Client disconnected
    docker_impl.go:376: debug	Removing container...
    docker_impl.go:394: debug	Container removed.
=== RUN   TestConformance/connection/sendingSignalsShouldWork
    conformance_test.go:44: Allocating port 42427 for test TestConformance/connection/sendingSignalsShouldWork for client
    NewTestServer.go:20: Allocating port 46873 for test TestConformance/connection/sendingSignalsShouldWork for SSH
    serverImpl.go:75: info	SSH server running on 127.0.0.1:46873
    testClientImpl.go:21: debug	Connecting SSH server...
    serverImpl.go:456: debug	Client connected
    serverImpl.go:217: info	Password authentication for user test successful.
    handler_network.go:90: debug	Checking if an image pull is needed...
    handler_network.go:102: debug	Image pull policy is "IfNotPresent" and the image name is "latest", pulling image.
    docker_impl.go:118: debug	Pulling image docker.io/containerssh/containerssh-guest-image...
    docker_impl.go:173: debug	Creating container...
    docker_impl.go:328: debug	Starting container...
    serverImpl.go:479: debug	SSH handshake successful
    testClientConnectionImpl.go:23: debug	Opening session channel..
    serverImpl.go:602: debug	New SSH channel
    testClientSessionImpl.go:180: debug	Executing program '/usr/bin/containerssh-agent wait-signal --signal USR1 --message "USR1 received"'...
    serverImpl.go:697: debug	exec channel request from client
    docker_impl.go:451: debug	Creating and attaching to container exec...
    docker_impl.go:480: debug	Creating exec...
    docker_impl.go:545: debug	Attaching exec...
    serverImpl.go:720: debug	exec channel request from client successful
    testClientSessionImpl.go:105: debug	Sending USR1 signal to process...
    testClientSessionImpl.go:219: debug	Waiting for the following string on stdout: USR1 received
    serverImpl.go:697: debug	signal channel request from client
    docker_impl.go:659: debug	Using the exec facility to send signal USR1 to pid 13...
    docker_impl.go:451: debug	Creating and attaching to container exec...
    docker_impl.go:480: debug	Creating exec...
    docker_impl.go:545: debug	Attaching exec...
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 1 bytes: U
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 2 bytes: US
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 3 bytes: USR
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 4 bytes: USR1
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 5 bytes: USR1 
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 6 bytes: USR1 r
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 7 bytes: USR1 re
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 8 bytes: USR1 rec
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 9 bytes: USR1 rece
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 10 bytes: USR1 recei
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 11 bytes: USR1 receiv
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 12 bytes: USR1 receive
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 13 bytes: USR1 received
    testClientSessionImpl.go:28: debug	Reading remaining bytes from stdout...
    docker_impl.go:1080: debug	Program exited with 0
    docker_impl.go:677: debug	Sent USR1 signal to container c9b94bae7dd3293622f9acb40d3bd4cdbd03384fe66a401fa8636545cd6e55e5 pid 13
    serverImpl.go:720: debug	signal channel request from client successful
    docker_impl.go:1080: debug	Program exited with 0
    channelWrapper.go:52: debug	Program exited with status 0
    testClientSessionImpl.go:251: debug	Waiting for session to finish.
    testClientSessionImpl.go:28: debug	Reading remaining bytes from stdout...
    testClientSessionImpl.go:48: debug	Reading remaining bytes from stderr...
    conformanceTestSuite.go:277: test complete
    testClientConnectionImpl.go:46: debug	Closing connection...
    serverImpl.go:487: debug	Client disconnected
    docker_impl.go:376: debug	Removing container...
    docker_impl.go:394: debug	Container removed.
--- PASS: TestConformance (73.25s)
    --- PASS: TestConformance/session (36.22s)
        --- PASS: TestConformance/session/singleProgramShouldRun (4.74s)
        --- PASS: TestConformance/session/settingEnvVariablesShouldWork (4.08s)
        --- PASS: TestConformance/session/runningInteractiveShellShouldWork (16.53s)
        --- PASS: TestConformance/session/reportingExitCodeShouldWork (4.14s)
        --- PASS: TestConformance/session/sendingSignalsShouldWork (6.73s)
    --- PASS: TestConformance/connection (37.04s)
        --- PASS: TestConformance/connection/singleProgramShouldRun (4.92s)
        --- PASS: TestConformance/connection/settingEnvVariablesShouldWork (5.05s)
        --- PASS: TestConformance/connection/runningInteractiveShellShouldWork (16.02s)
        --- PASS: TestConformance/connection/reportingExitCodeShouldWork (4.64s)
        --- PASS: TestConformance/connection/sendingSignalsShouldWork (6.40s)
PASS
ok  	github.com/containerssh/libcontainerssh/internal/docker	73.262s
=== RUN   TestMaxMind
--- PASS: TestMaxMind (0.00s)
PASS
ok  	github.com/containerssh/libcontainerssh/internal/geoip	0.003s
?   	github.com/containerssh/libcontainerssh/internal/geoip/dummy	[no test files]
?   	github.com/containerssh/libcontainerssh/internal/geoip/geoipprovider	[no test files]
?   	github.com/containerssh/libcontainerssh/internal/geoip/oschwald	[no test files]
=== RUN   TestOk
    health.go:26: info	Health check endpoint available at http://127.0.0.1:23074
    client_impl.go:115: debug	HTTP GET request to http://127.0.0.1:23074
    client_impl.go:130: debug	HTTP response with status 503
    client_impl.go:115: debug	HTTP GET request to http://127.0.0.1:23074
    client_impl.go:130: debug	HTTP response with status 200
    client_impl.go:115: debug	HTTP GET request to http://127.0.0.1:23074
    client_impl.go:130: debug	HTTP response with status 503
--- PASS: TestOk (0.00s)
PASS
ok  	github.com/containerssh/libcontainerssh/internal/health	0.004s
=== RUN   TestConformance
=== RUN   TestConformance/session
=== RUN   TestConformance/session/singleProgramShouldRun
--- FAIL: TestConformance (0.00s)
    --- FAIL: TestConformance/session (0.00s)
        --- FAIL: TestConformance/session/singleProgramShouldRun (0.00s)
panic: runtime error: index out of range [0] with length 0 [recovered]
	panic: runtime error: index out of range [0] with length 0

goroutine 12 [running]:
testing.tRunner.func1.2({0x15ea760, 0xc000045ae8})
	/usr/local/lib/go/src/testing/testing.go:1209 +0x24e
testing.tRunner.func1()
	/usr/local/lib/go/src/testing/testing.go:1212 +0x218
panic({0x15ea760, 0xc000045ae8})
	/usr/local/lib/go/src/runtime/panic.go:1038 +0x215
github.com/containerssh/libcontainerssh/internal/test.kubeConfig.getContext({{0xc000363028, 0x2}, {0x0, 0x0, 0x0}, {0x0, 0x0, 0x0}, {0x0, 0x0}, ...}, ...)
	/home/janosdebugs/GolandProjects/libcontainerssh/internal/test/kubernetes.go:308 +0xe5
github.com/containerssh/libcontainerssh/internal/test.kubeConfig.getUser({{0xc000363028, 0x2}, {0x0, 0x0, 0x0}, {0x0, 0x0, 0x0}, {0x0, 0x0}, ...}, ...)
	/home/janosdebugs/GolandProjects/libcontainerssh/internal/test/kubernetes.go:334 +0xa5
github.com/containerssh/libcontainerssh/internal/test.Kubernetes(0xc000582ea0)
	/home/janosdebugs/GolandProjects/libcontainerssh/internal/test/kubernetes.go:47 +0x225
github.com/containerssh/libcontainerssh/internal/kubernetes_test.getKubernetesConfig(_)
	/home/janosdebugs/GolandProjects/libcontainerssh/internal/kubernetes/conformance_test.go:51 +0x7e
github.com/containerssh/libcontainerssh/internal/kubernetes_test.TestConformance.func1(0x1f932a0, {0x18f3740, 0xc00069ddd0})
	/home/janosdebugs/GolandProjects/libcontainerssh/internal/kubernetes/conformance_test.go:20 +0x46
github.com/containerssh/libcontainerssh/internal/sshserver.(*conformanceTestSuite).singleProgramShouldRun(0xc000011890, 0xc000582ea0)
	/home/janosdebugs/GolandProjects/libcontainerssh/internal/sshserver/conformanceTestSuite.go:19 +0x8d
testing.tRunner(0xc000582ea0, 0xc000190f20)
	/usr/local/lib/go/src/testing/testing.go:1259 +0x102
created by testing.(*T).Run
	/usr/local/lib/go/src/testing/testing.go:1306 +0x35a
FAIL	github.com/containerssh/libcontainerssh/internal/kubernetes	0.011s
=== RUN   TestCounter
--- PASS: TestCounter (0.00s)
=== RUN   TestCounterLabel
--- PASS: TestCounterLabel (0.00s)
=== RUN   TestCounterGeo
--- PASS: TestCounterGeo (0.00s)
=== RUN   TestGeoCounterLabel
--- PASS: TestGeoCounterLabel (0.00s)
=== RUN   TestGauge
--- PASS: TestGauge (0.00s)
=== RUN   TestGaugeGeo
--- PASS: TestGaugeGeo (0.00s)
=== RUN   TestFetchMetrics
    server_test.go:22: Allocating port 40133 for test TestFetchMetrics for metrics
    server.go:24: info	Metrics server is now available at http://127.0.0.1:40133/metrics
--- PASS: TestFetchMetrics (0.00s)
PASS
ok  	github.com/containerssh/libcontainerssh/internal/metrics	0.008s
=== RUN   TestMetricsReporting
=== RUN   TestMetricsReporting/auth=successful
=== RUN   TestMetricsReporting/auth=failed
--- PASS: TestMetricsReporting (0.00s)
    --- PASS: TestMetricsReporting/auth=successful (0.00s)
    --- PASS: TestMetricsReporting/auth=failed (0.00s)
PASS
ok  	github.com/containerssh/libcontainerssh/internal/metricsintegration	0.007s
=== RUN   TestMaxSessions
    handler_ssh.go:45: debug	The user has opened too many sessions.
--- PASS: TestMaxSessions (0.00s)
=== RUN   TestEnvRequest
    handler_session.go:92: debug	Setting an environment variable is rejected because it matches the deny list.
    handler_session.go:79: debug	Setting an environment variable is rejected because it does not match the allow list.
    handler_session.go:79: debug	Setting an environment variable is rejected because it does not match the allow list.
    handler_session.go:68: debug	Setting an environment variable is rejected because it is disabled in the security settings.
    handler_session.go:68: debug	Setting an environment variable is rejected because it is disabled in the security settings.
    handler_session.go:68: debug	Setting an environment variable is rejected because it is disabled in the security settings.
--- PASS: TestEnvRequest (0.00s)
=== RUN   TestPTYRequest
    handler_session.go:116: debug	TTY allocation is disabled in the security settings.
    handler_session.go:116: debug	TTY allocation is disabled in the security settings.
--- PASS: TestPTYRequest (0.00s)
=== RUN   TestCommand
    handler_session.go:137: debug	Command execution is disabled in the security settings.
    handler_session.go:146: debug	The specified command passed from the client does not match the specified allow list.
    handler_session.go:166: debug	Forcing command execution to /bin/wrapper
--- PASS: TestCommand (0.00s)
=== RUN   TestShell
    handler_session.go:188: debug	Shell execution is disabled in the security settings.
    handler_session.go:188: debug	Shell execution is disabled in the security settings.
    handler_session.go:197: debug	Forcing command execution to /bin/wrapper
--- PASS: TestShell (0.00s)
=== RUN   TestSubsystem
    handler_session.go:218: debug	Subsystem execution is disabled in the security settings.
    handler_session.go:227: debug	The specified subsystem does not match the allowed subsystems list.
    handler_session.go:237: debug	The subsystem execution is rejected because the specified subsystem matches the deny list.
    handler_session.go:255: debug	Forcing command execution to /bin/wrapper
--- PASS: TestSubsystem (0.00s)
PASS
ok  	github.com/containerssh/libcontainerssh/internal/security	0.008s
?   	github.com/containerssh/libcontainerssh/internal/ssh	[no test files]
=== RUN   TestConformance
=== RUN   TestConformance/sshproxy
=== RUN   TestConformance/sshproxy/singleProgramShouldRun
    conformance_test.go:21: Creating and starting a container from local build...
    conformance_test.go:21: Building local image...
    docker.go:260: Compiling build context...
    docker.go:262: Build context compiled.
    conformance_test.go:21: Reading build log...
    io.go:425: {"stream":"Step 1/10 : FROM containerssh/agent AS agent"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e 3f3e03864ce3\n"}
        {"aux":{"ID":"sha256:3f3e03864ce385bb4bdc86c6c930f17dc326fe7a704cc0f4a76d049cae2b2ed0"}}
    io.go:425: {"stream":"Step 2/10 : FROM ubuntu:20.04"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e ba6acccedd29\n"}
        {"stream":"Step 3/10 : RUN apt update     \u0026\u0026 apt install -y openssh-server     \u0026\u0026 rm -rf /var/lib/apt/lists/*"}
    io.go:425: {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e 17989d1751d4\n"}
        {"stream":"Step 4/10 : RUN mkdir -p /run/sshd"}
    io.go:425: {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e 866392f4c527\n"}
    io.go:425: {"stream":"Step 5/10 : COPY init.sh /init.sh"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e d4592b656354\n"}
    io.go:425: {"stream":"Step 6/10 : RUN chmod +x /init.sh"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e d1952592a357\n"}
        {"stream":"Step 7/10 : COPY --from=agent /usr/bin/containerssh-agent /usr/bin/containerssh-agent"}
    io.go:425: {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
    io.go:425: {"stream":" ---\u003e b18ad1db4dd0\n"}
        {"stream":"Step 8/10 : HEALTHCHECK --start-period=10s CMD /usr/bin/ssh-keyscan 127.0.0.1"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e 0cd2efeebc4b\n"}
    io.go:425: {"stream":"Step 9/10 : EXPOSE 22"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e ea8cbca46a43\n"}
        {"stream":"Step 10/10 : CMD [\"/init.sh\"]"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e dbc9f5d6c6d0\n"}
    io.go:425: {"aux":{"ID":"sha256:dbc9f5d6c6d0808ad84a6fb5a4a82648efef2feed8619a1e744a58f900062d9e"}}
    io.go:425: {"stream":"Successfully built dbc9f5d6c6d0\n"}
    io.go:425: {"stream":"Successfully tagged ssh:latest\n"}
    conformance_test.go:21: Creating container from ssh...
    conformance_test.go:21: Container has ID f466048a8866e6065831f20ccb4bd84055f519888c139b63d5e584bc74d1bab2...
    conformance_test.go:21: Starting container f466048a8866e6065831f20ccb4bd84055f519888c139b63d5e584bc74d1bab2...
    conformance_test.go:21: Waiting for the port mappings to come up...
    conformance_test.go:21: Inspecting container f466048a8866e6065831f20ccb4bd84055f519888c139b63d5e584bc74d1bab2...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container f466048a8866e6065831f20ccb4bd84055f519888c139b63d5e584bc74d1bab2...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container f466048a8866e6065831f20ccb4bd84055f519888c139b63d5e584bc74d1bab2...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container f466048a8866e6065831f20ccb4bd84055f519888c139b63d5e584bc74d1bab2...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container f466048a8866e6065831f20ccb4bd84055f519888c139b63d5e584bc74d1bab2...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container f466048a8866e6065831f20ccb4bd84055f519888c139b63d5e584bc74d1bab2...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container f466048a8866e6065831f20ccb4bd84055f519888c139b63d5e584bc74d1bab2...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container f466048a8866e6065831f20ccb4bd84055f519888c139b63d5e584bc74d1bab2...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container f466048a8866e6065831f20ccb4bd84055f519888c139b63d5e584bc74d1bab2...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container f466048a8866e6065831f20ccb4bd84055f519888c139b63d5e584bc74d1bab2...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container f466048a8866e6065831f20ccb4bd84055f519888c139b63d5e584bc74d1bab2...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container f466048a8866e6065831f20ccb4bd84055f519888c139b63d5e584bc74d1bab2...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container f466048a8866e6065831f20ccb4bd84055f519888c139b63d5e584bc74d1bab2...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container f466048a8866e6065831f20ccb4bd84055f519888c139b63d5e584bc74d1bab2...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container f466048a8866e6065831f20ccb4bd84055f519888c139b63d5e584bc74d1bab2...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container f466048a8866e6065831f20ccb4bd84055f519888c139b63d5e584bc74d1bab2...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container f466048a8866e6065831f20ccb4bd84055f519888c139b63d5e584bc74d1bab2...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container f466048a8866e6065831f20ccb4bd84055f519888c139b63d5e584bc74d1bab2...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container f466048a8866e6065831f20ccb4bd84055f519888c139b63d5e584bc74d1bab2...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container f466048a8866e6065831f20ccb4bd84055f519888c139b63d5e584bc74d1bab2...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container f466048a8866e6065831f20ccb4bd84055f519888c139b63d5e584bc74d1bab2...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container f466048a8866e6065831f20ccb4bd84055f519888c139b63d5e584bc74d1bab2...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container f466048a8866e6065831f20ccb4bd84055f519888c139b63d5e584bc74d1bab2...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container f466048a8866e6065831f20ccb4bd84055f519888c139b63d5e584bc74d1bab2...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container f466048a8866e6065831f20ccb4bd84055f519888c139b63d5e584bc74d1bab2...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container f466048a8866e6065831f20ccb4bd84055f519888c139b63d5e584bc74d1bab2...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container f466048a8866e6065831f20ccb4bd84055f519888c139b63d5e584bc74d1bab2...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container f466048a8866e6065831f20ccb4bd84055f519888c139b63d5e584bc74d1bab2...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container f466048a8866e6065831f20ccb4bd84055f519888c139b63d5e584bc74d1bab2...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container f466048a8866e6065831f20ccb4bd84055f519888c139b63d5e584bc74d1bab2...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container f466048a8866e6065831f20ccb4bd84055f519888c139b63d5e584bc74d1bab2...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container f466048a8866e6065831f20ccb4bd84055f519888c139b63d5e584bc74d1bab2...
    conformance_test.go:40: Allocating port 38539 for test TestConformance/sshproxy/singleProgramShouldRun for client
    NewTestServer.go:20: Allocating port 46861 for test TestConformance/sshproxy/singleProgramShouldRun for SSH
    serverImpl.go:75: info	SSH server running on 127.0.0.1:46861
    testClientImpl.go:21: debug	Connecting SSH server...
    serverImpl.go:456: debug	Client connected
    serverImpl.go:217: info	Password authentication for user test successful.
    networkConnectionHandler.go:183: debug	Connecting to backend server 127.0.0.1:49161
    serverImpl.go:479: debug	SSH handshake successful
    testClientConnectionImpl.go:23: debug	Opening session channel..
    sshConnectionHandler.go:47: debug	Opening new session on SSH backend...
    sshConnectionHandler.go:83: debug	Session open on SSH backend...
    serverImpl.go:602: debug	New SSH channel
    testClientSessionImpl.go:180: debug	Executing program 'echo "Hello world!"'...
    serverImpl.go:697: debug	exec channel request from client
    serverImpl.go:720: debug	exec channel request from client successful
    testClientSessionImpl.go:219: debug	Waiting for the following string on stdout: Hello world!
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 1 bytes: H
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 2 bytes: He
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 3 bytes: Hel
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 4 bytes: Hell
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 5 bytes: Hello
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 6 bytes: Hello 
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 7 bytes: Hello w
    sshChannelHandler.go:140: debug	Stderr streaming complete.
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 8 bytes: Hello wo
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 9 bytes: Hello wor
    sshChannelHandler.go:74: debug	Received exit status from backend: 0
    channelWrapper.go:52: debug	Program exited with status 0
    sshChannelHandler.go:38: debug	Backend closed session.
    sshChannelHandler.go:150: debug	Stdout streaming complete.
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 10 bytes: Hello worl
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 11 bytes: Hello world
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 12 bytes: Hello world!
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 13 bytes: Hello world!
    testClientSessionImpl.go:251: debug	Waiting for session to finish.
    testClientSessionImpl.go:28: debug	Reading remaining bytes from stdout...
    sshChannelHandler.go:376: debug	Close received from client, closing backing channel.
    sshChannelHandler.go:383: debug	Backing channel closed.
    sshChannelHandler.go:160: debug	Stdin complete, closing backing session channel...
    sshChannelHandler.go:177: debug	Closed backing session channel.
    testClientSessionImpl.go:48: debug	Reading remaining bytes from stderr...
    conformanceTestSuite.go:57: test complete
    testClientConnectionImpl.go:46: debug	Closing connection...
    serverImpl.go:487: debug	Client disconnected
    networkConnectionHandler.go:220: debug	Client disconnected, waiting for network connection lock...
    networkConnectionHandler.go:228: debug	Client disconnected, waiting for all sessions to terminate...
    networkConnectionHandler.go:238: debug	Disconnecting backend connection...
    networkConnectionHandler.go:247: debug	Backend connection disconnected.
    conformance_test.go:21: Removing container ID f466048a8866e6065831f20ccb4bd84055f519888c139b63d5e584bc74d1bab2...
=== RUN   TestConformance/sshproxy/settingEnvVariablesShouldWork
    conformance_test.go:21: Creating and starting a container from local build...
    conformance_test.go:21: Building local image...
    docker.go:260: Compiling build context...
    docker.go:262: Build context compiled.
    conformance_test.go:21: Reading build log...
    io.go:425: {"stream":"Step 1/10 : FROM containerssh/agent AS agent"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e 3f3e03864ce3\n"}
    io.go:425: {"aux":{"ID":"sha256:3f3e03864ce385bb4bdc86c6c930f17dc326fe7a704cc0f4a76d049cae2b2ed0"}}
        {"stream":"Step 2/10 : FROM ubuntu:20.04"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e ba6acccedd29\n"}
        {"stream":"Step 3/10 : RUN apt update     \u0026\u0026 apt install -y openssh-server     \u0026\u0026 rm -rf /var/lib/apt/lists/*"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e 17989d1751d4\n"}
    io.go:425: {"stream":"Step 4/10 : RUN mkdir -p /run/sshd"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e 866392f4c527\n"}
    io.go:425: {"stream":"Step 5/10 : COPY init.sh /init.sh"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e d4592b656354\n"}
        {"stream":"Step 6/10 : RUN chmod +x /init.sh"}
    io.go:425: {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e d1952592a357\n"}
    io.go:425: {"stream":"Step 7/10 : COPY --from=agent /usr/bin/containerssh-agent /usr/bin/containerssh-agent"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
    io.go:425: {"stream":" ---\u003e b18ad1db4dd0\n"}
        {"stream":"Step 8/10 : HEALTHCHECK --start-period=10s CMD /usr/bin/ssh-keyscan 127.0.0.1"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e 0cd2efeebc4b\n"}
    io.go:425: {"stream":"Step 9/10 : EXPOSE 22"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e ea8cbca46a43\n"}
    io.go:425: {"stream":"Step 10/10 : CMD [\"/init.sh\"]"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e dbc9f5d6c6d0\n"}
    io.go:425: {"aux":{"ID":"sha256:dbc9f5d6c6d0808ad84a6fb5a4a82648efef2feed8619a1e744a58f900062d9e"}}
    io.go:425: {"stream":"Successfully built dbc9f5d6c6d0\n"}
    io.go:425: {"stream":"Successfully tagged ssh:latest\n"}
    conformance_test.go:21: Creating container from ssh...
    conformance_test.go:21: Container has ID 096b4aeb7c17f7260a67e81b77412d5dca556ef0d680ea9183468af55abf8a14...
    conformance_test.go:21: Starting container 096b4aeb7c17f7260a67e81b77412d5dca556ef0d680ea9183468af55abf8a14...
    conformance_test.go:21: Waiting for the port mappings to come up...
    conformance_test.go:21: Inspecting container 096b4aeb7c17f7260a67e81b77412d5dca556ef0d680ea9183468af55abf8a14...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 096b4aeb7c17f7260a67e81b77412d5dca556ef0d680ea9183468af55abf8a14...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 096b4aeb7c17f7260a67e81b77412d5dca556ef0d680ea9183468af55abf8a14...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 096b4aeb7c17f7260a67e81b77412d5dca556ef0d680ea9183468af55abf8a14...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 096b4aeb7c17f7260a67e81b77412d5dca556ef0d680ea9183468af55abf8a14...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 096b4aeb7c17f7260a67e81b77412d5dca556ef0d680ea9183468af55abf8a14...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 096b4aeb7c17f7260a67e81b77412d5dca556ef0d680ea9183468af55abf8a14...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 096b4aeb7c17f7260a67e81b77412d5dca556ef0d680ea9183468af55abf8a14...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 096b4aeb7c17f7260a67e81b77412d5dca556ef0d680ea9183468af55abf8a14...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 096b4aeb7c17f7260a67e81b77412d5dca556ef0d680ea9183468af55abf8a14...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 096b4aeb7c17f7260a67e81b77412d5dca556ef0d680ea9183468af55abf8a14...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 096b4aeb7c17f7260a67e81b77412d5dca556ef0d680ea9183468af55abf8a14...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 096b4aeb7c17f7260a67e81b77412d5dca556ef0d680ea9183468af55abf8a14...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 096b4aeb7c17f7260a67e81b77412d5dca556ef0d680ea9183468af55abf8a14...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 096b4aeb7c17f7260a67e81b77412d5dca556ef0d680ea9183468af55abf8a14...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 096b4aeb7c17f7260a67e81b77412d5dca556ef0d680ea9183468af55abf8a14...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 096b4aeb7c17f7260a67e81b77412d5dca556ef0d680ea9183468af55abf8a14...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 096b4aeb7c17f7260a67e81b77412d5dca556ef0d680ea9183468af55abf8a14...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 096b4aeb7c17f7260a67e81b77412d5dca556ef0d680ea9183468af55abf8a14...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 096b4aeb7c17f7260a67e81b77412d5dca556ef0d680ea9183468af55abf8a14...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 096b4aeb7c17f7260a67e81b77412d5dca556ef0d680ea9183468af55abf8a14...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 096b4aeb7c17f7260a67e81b77412d5dca556ef0d680ea9183468af55abf8a14...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 096b4aeb7c17f7260a67e81b77412d5dca556ef0d680ea9183468af55abf8a14...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 096b4aeb7c17f7260a67e81b77412d5dca556ef0d680ea9183468af55abf8a14...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 096b4aeb7c17f7260a67e81b77412d5dca556ef0d680ea9183468af55abf8a14...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 096b4aeb7c17f7260a67e81b77412d5dca556ef0d680ea9183468af55abf8a14...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 096b4aeb7c17f7260a67e81b77412d5dca556ef0d680ea9183468af55abf8a14...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 096b4aeb7c17f7260a67e81b77412d5dca556ef0d680ea9183468af55abf8a14...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 096b4aeb7c17f7260a67e81b77412d5dca556ef0d680ea9183468af55abf8a14...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 096b4aeb7c17f7260a67e81b77412d5dca556ef0d680ea9183468af55abf8a14...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 096b4aeb7c17f7260a67e81b77412d5dca556ef0d680ea9183468af55abf8a14...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 096b4aeb7c17f7260a67e81b77412d5dca556ef0d680ea9183468af55abf8a14...
    conformance_test.go:40: Allocating port 46215 for test TestConformance/sshproxy/settingEnvVariablesShouldWork for client
    NewTestServer.go:20: Allocating port 33347 for test TestConformance/sshproxy/settingEnvVariablesShouldWork for SSH
    serverImpl.go:75: info	SSH server running on 127.0.0.1:33347
    testClientImpl.go:21: debug	Connecting SSH server...
    serverImpl.go:456: debug	Client connected
    serverImpl.go:217: info	Password authentication for user test successful.
    networkConnectionHandler.go:183: debug	Connecting to backend server 127.0.0.1:49162
    serverImpl.go:479: debug	SSH handshake successful
    testClientConnectionImpl.go:23: debug	Opening session channel..
    sshConnectionHandler.go:47: debug	Opening new session on SSH backend...
    sshConnectionHandler.go:83: debug	Session open on SSH backend...
    serverImpl.go:602: debug	New SSH channel
    testClientSessionImpl.go:153: debug	Setting env variable FOO=Hello world!...
    serverImpl.go:697: debug	env channel request from client
    serverImpl.go:720: debug	env channel request from client successful
    testClientSessionImpl.go:180: debug	Executing program 'echo "$FOO"'...
    serverImpl.go:697: debug	exec channel request from client
    serverImpl.go:720: debug	exec channel request from client successful
    testClientSessionImpl.go:219: debug	Waiting for the following string on stdout: Hello world!
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 1 bytes: H
    sshChannelHandler.go:74: debug	Received exit status from backend: 0
    sshChannelHandler.go:140: debug	Stderr streaming complete.
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 2 bytes: He
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 3 bytes: Hel
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 4 bytes: Hell
    sshChannelHandler.go:150: debug	Stdout streaming complete.
    channelWrapper.go:52: debug	Program exited with status 0
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 5 bytes: Hello
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 6 bytes: Hello 
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 7 bytes: Hello w
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 8 bytes: Hello wo
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 9 bytes: Hello wor
    sshChannelHandler.go:38: debug	Backend closed session.
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 10 bytes: Hello worl
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 11 bytes: Hello world
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 12 bytes: Hello world!
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 13 bytes: Hello world!
    testClientSessionImpl.go:251: debug	Waiting for session to finish.
    testClientSessionImpl.go:28: debug	Reading remaining bytes from stdout...
    sshChannelHandler.go:376: debug	Close received from client, closing backing channel.
    sshChannelHandler.go:383: debug	Backing channel closed.
    sshChannelHandler.go:160: debug	Stdin complete, closing backing session channel...
    sshChannelHandler.go:177: debug	Closed backing session channel.
    testClientSessionImpl.go:48: debug	Reading remaining bytes from stderr...
    conformanceTestSuite.go:104: test complete
    testClientConnectionImpl.go:46: debug	Closing connection...
    serverImpl.go:487: debug	Client disconnected
    networkConnectionHandler.go:220: debug	Client disconnected, waiting for network connection lock...
    networkConnectionHandler.go:228: debug	Client disconnected, waiting for all sessions to terminate...
    networkConnectionHandler.go:238: debug	Disconnecting backend connection...
    networkConnectionHandler.go:247: debug	Backend connection disconnected.
    conformance_test.go:21: Removing container ID 096b4aeb7c17f7260a67e81b77412d5dca556ef0d680ea9183468af55abf8a14...
=== RUN   TestConformance/sshproxy/runningInteractiveShellShouldWork
    conformance_test.go:21: Creating and starting a container from local build...
    conformance_test.go:21: Building local image...
    docker.go:260: Compiling build context...
    docker.go:262: Build context compiled.
    conformance_test.go:21: Reading build log...
    io.go:425: {"stream":"Step 1/10 : FROM containerssh/agent AS agent"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e 3f3e03864ce3\n"}
    io.go:425: {"aux":{"ID":"sha256:3f3e03864ce385bb4bdc86c6c930f17dc326fe7a704cc0f4a76d049cae2b2ed0"}}
        {"stream":"Step 2/10 : FROM ubuntu:20.04"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e ba6acccedd29\n"}
        {"stream":"Step 3/10 : RUN apt update     \u0026\u0026 apt install -y openssh-server     \u0026\u0026 rm -rf /var/lib/apt/lists/*"}
    io.go:425: {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e 17989d1751d4\n"}
    io.go:425: {"stream":"Step 4/10 : RUN mkdir -p /run/sshd"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e 866392f4c527\n"}
    io.go:425: {"stream":"Step 5/10 : COPY init.sh /init.sh"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e d4592b656354\n"}
        {"stream":"Step 6/10 : RUN chmod +x /init.sh"}
    io.go:425: {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e d1952592a357\n"}
    io.go:425: {"stream":"Step 7/10 : COPY --from=agent /usr/bin/containerssh-agent /usr/bin/containerssh-agent"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
    io.go:425: {"stream":" ---\u003e b18ad1db4dd0\n"}
        {"stream":"Step 8/10 : HEALTHCHECK --start-period=10s CMD /usr/bin/ssh-keyscan 127.0.0.1"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e 0cd2efeebc4b\n"}
    io.go:425: {"stream":"Step 9/10 : EXPOSE 22"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e ea8cbca46a43\n"}
    io.go:425: {"stream":"Step 10/10 : CMD [\"/init.sh\"]"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e dbc9f5d6c6d0\n"}
    io.go:425: {"aux":{"ID":"sha256:dbc9f5d6c6d0808ad84a6fb5a4a82648efef2feed8619a1e744a58f900062d9e"}}
    io.go:425: {"stream":"Successfully built dbc9f5d6c6d0\n"}
    io.go:425: {"stream":"Successfully tagged ssh:latest\n"}
    conformance_test.go:21: Creating container from ssh...
    conformance_test.go:21: Container has ID 9ec22affd2887ed40797dbbec09c1ac41dbb73cd5017221c81145e4b6ee20a47...
    conformance_test.go:21: Starting container 9ec22affd2887ed40797dbbec09c1ac41dbb73cd5017221c81145e4b6ee20a47...
    conformance_test.go:21: Waiting for the port mappings to come up...
    conformance_test.go:21: Inspecting container 9ec22affd2887ed40797dbbec09c1ac41dbb73cd5017221c81145e4b6ee20a47...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 9ec22affd2887ed40797dbbec09c1ac41dbb73cd5017221c81145e4b6ee20a47...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 9ec22affd2887ed40797dbbec09c1ac41dbb73cd5017221c81145e4b6ee20a47...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 9ec22affd2887ed40797dbbec09c1ac41dbb73cd5017221c81145e4b6ee20a47...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 9ec22affd2887ed40797dbbec09c1ac41dbb73cd5017221c81145e4b6ee20a47...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 9ec22affd2887ed40797dbbec09c1ac41dbb73cd5017221c81145e4b6ee20a47...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 9ec22affd2887ed40797dbbec09c1ac41dbb73cd5017221c81145e4b6ee20a47...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 9ec22affd2887ed40797dbbec09c1ac41dbb73cd5017221c81145e4b6ee20a47...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 9ec22affd2887ed40797dbbec09c1ac41dbb73cd5017221c81145e4b6ee20a47...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 9ec22affd2887ed40797dbbec09c1ac41dbb73cd5017221c81145e4b6ee20a47...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 9ec22affd2887ed40797dbbec09c1ac41dbb73cd5017221c81145e4b6ee20a47...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 9ec22affd2887ed40797dbbec09c1ac41dbb73cd5017221c81145e4b6ee20a47...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 9ec22affd2887ed40797dbbec09c1ac41dbb73cd5017221c81145e4b6ee20a47...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 9ec22affd2887ed40797dbbec09c1ac41dbb73cd5017221c81145e4b6ee20a47...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 9ec22affd2887ed40797dbbec09c1ac41dbb73cd5017221c81145e4b6ee20a47...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 9ec22affd2887ed40797dbbec09c1ac41dbb73cd5017221c81145e4b6ee20a47...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 9ec22affd2887ed40797dbbec09c1ac41dbb73cd5017221c81145e4b6ee20a47...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 9ec22affd2887ed40797dbbec09c1ac41dbb73cd5017221c81145e4b6ee20a47...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 9ec22affd2887ed40797dbbec09c1ac41dbb73cd5017221c81145e4b6ee20a47...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 9ec22affd2887ed40797dbbec09c1ac41dbb73cd5017221c81145e4b6ee20a47...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 9ec22affd2887ed40797dbbec09c1ac41dbb73cd5017221c81145e4b6ee20a47...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 9ec22affd2887ed40797dbbec09c1ac41dbb73cd5017221c81145e4b6ee20a47...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 9ec22affd2887ed40797dbbec09c1ac41dbb73cd5017221c81145e4b6ee20a47...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 9ec22affd2887ed40797dbbec09c1ac41dbb73cd5017221c81145e4b6ee20a47...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 9ec22affd2887ed40797dbbec09c1ac41dbb73cd5017221c81145e4b6ee20a47...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 9ec22affd2887ed40797dbbec09c1ac41dbb73cd5017221c81145e4b6ee20a47...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 9ec22affd2887ed40797dbbec09c1ac41dbb73cd5017221c81145e4b6ee20a47...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 9ec22affd2887ed40797dbbec09c1ac41dbb73cd5017221c81145e4b6ee20a47...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 9ec22affd2887ed40797dbbec09c1ac41dbb73cd5017221c81145e4b6ee20a47...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 9ec22affd2887ed40797dbbec09c1ac41dbb73cd5017221c81145e4b6ee20a47...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 9ec22affd2887ed40797dbbec09c1ac41dbb73cd5017221c81145e4b6ee20a47...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 9ec22affd2887ed40797dbbec09c1ac41dbb73cd5017221c81145e4b6ee20a47...
    conformance_test.go:40: Allocating port 38785 for test TestConformance/sshproxy/runningInteractiveShellShouldWork for client
    NewTestServer.go:20: Allocating port 37411 for test TestConformance/sshproxy/runningInteractiveShellShouldWork for SSH
    serverImpl.go:75: info	SSH server running on 127.0.0.1:37411
    testClientImpl.go:21: debug	Connecting SSH server...
    serverImpl.go:456: debug	Client connected
    serverImpl.go:217: info	Password authentication for user test successful.
    networkConnectionHandler.go:183: debug	Connecting to backend server 127.0.0.1:49163
    serverImpl.go:479: debug	SSH handshake successful
    testClientConnectionImpl.go:23: debug	Opening session channel..
    sshConnectionHandler.go:47: debug	Opening new session on SSH backend...
    sshConnectionHandler.go:83: debug	Session open on SSH backend...
    serverImpl.go:602: debug	New SSH channel
    testClientSessionImpl.go:153: debug	Setting env variable foo=bar...
    serverImpl.go:697: debug	env channel request from client
    serverImpl.go:720: debug	env channel request from client successful
    testClientSessionImpl.go:163: debug	Requesting PTY for term xterm cols 80 rows 25...
    serverImpl.go:697: debug	pty-req channel request from client
    serverImpl.go:720: debug	pty-req channel request from client successful
    testClientSessionImpl.go:172: debug	Executing shell...
    serverImpl.go:697: debug	shell channel request from client
    serverImpl.go:720: debug	shell channel request from client successful
    testClientSessionImpl.go:28: debug	Reading remaining bytes from stdout...
    testClientSessionImpl.go:64: debug	Typing on stdin with sleep and read back: tput cols
    testClientSessionImpl.go:196: debug	Writing to stdin: t
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: p
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: u
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: t
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin:  
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: c
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: o
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: l
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: s
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: 
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:100: debug	Typing done.
    testClientSessionImpl.go:219: debug	Waiting for the following string on stdout: 80
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 1 bytes: 8
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 2 bytes: 80
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 3 bytes: 80
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 4 bytes: 80
    testClientSessionImpl.go:28: debug	Reading remaining bytes from stdout...
    testClientSessionImpl.go:64: debug	Typing on stdin with sleep and read back: tput lines
    testClientSessionImpl.go:196: debug	Writing to stdin: t
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: p
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: u
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: t
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin:  
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: l
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: i
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: n
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: e
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: s
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: 
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:100: debug	Typing done.
    testClientSessionImpl.go:219: debug	Waiting for the following string on stdout: 25
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 1 bytes: 2
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 2 bytes: 25
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 3 bytes: 25
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 4 bytes: 25
    testClientSessionImpl.go:28: debug	Reading remaining bytes from stdout...
    testClientSessionImpl.go:158: debug	Changing window to cols 120 rows 25...
    serverImpl.go:697: debug	window-change channel request from client
    serverImpl.go:720: debug	window-change channel request from client successful
    testClientSessionImpl.go:28: debug	Reading remaining bytes from stdout...
    testClientSessionImpl.go:64: debug	Typing on stdin with sleep and read back: tput cols
    testClientSessionImpl.go:196: debug	Writing to stdin: t
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: p
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: u
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: t
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin:  
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: c
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: o
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: l
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: s
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: 
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:100: debug	Typing done.
    testClientSessionImpl.go:219: debug	Waiting for the following string on stdout: 120
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 1 bytes: 1
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 2 bytes: 12
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 3 bytes: 120
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 4 bytes: 120
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 5 bytes: 120
    testClientSessionImpl.go:28: debug	Reading remaining bytes from stdout...
    testClientSessionImpl.go:64: debug	Typing on stdin with sleep and read back: tput lines
    testClientSessionImpl.go:196: debug	Writing to stdin: t
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: p
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: u
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: t
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin:  
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: l
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: i
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: n
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: e
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: s
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: 
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:100: debug	Typing done.
    testClientSessionImpl.go:219: debug	Waiting for the following string on stdout: 25
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 1 bytes: 2
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 2 bytes: 25
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 3 bytes: 25
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 4 bytes: 25
    testClientSessionImpl.go:28: debug	Reading remaining bytes from stdout...
    testClientSessionImpl.go:64: debug	Typing on stdin with sleep and read back: echo "Hello world!"
    testClientSessionImpl.go:196: debug	Writing to stdin: e
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: c
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: h
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: o
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin:  
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: "
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: H
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: e
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: l
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: l
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: o
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin:  
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: w
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: o
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: r
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: l
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: d
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: !
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: "
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: 
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:100: debug	Typing done.
    testClientSessionImpl.go:219: debug	Waiting for the following string on stdout: Hello world!
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 1 bytes: H
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 2 bytes: He
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 3 bytes: Hel
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 4 bytes: Hell
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 5 bytes: Hello
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 6 bytes: Hello 
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 7 bytes: Hello w
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 8 bytes: Hello wo
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 9 bytes: Hello wor
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 10 bytes: Hello worl
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 11 bytes: Hello world
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 12 bytes: Hello world!
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 13 bytes: Hello world!
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 14 bytes: Hello world!
    testClientSessionImpl.go:28: debug	Reading remaining bytes from stdout...
    testClientSessionImpl.go:64: debug	Typing on stdin with sleep and read back: exit
    testClientSessionImpl.go:196: debug	Writing to stdin: e
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: x
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: i
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: t
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:196: debug	Writing to stdin: 
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    testClientSessionImpl.go:206: debug	Reading 1 bytes from stdout...
    sshChannelHandler.go:74: debug	Received exit status from backend: 0
    channelWrapper.go:52: debug	Program exited with status 0
    sshChannelHandler.go:150: debug	Stdout streaming complete.
    sshChannelHandler.go:38: debug	Backend closed session.
    sshChannelHandler.go:140: debug	Stderr streaming complete.
    sshChannelHandler.go:160: debug	Stdin complete, closing backing session channel...
    sshChannelHandler.go:177: debug	Closed backing session channel.
    sshChannelHandler.go:376: debug	Close received from client, closing backing channel.
    sshChannelHandler.go:383: debug	Backing channel closed.
    testClientSessionImpl.go:100: debug	Typing done.
    testClientSessionImpl.go:251: debug	Waiting for session to finish.
    testClientSessionImpl.go:28: debug	Reading remaining bytes from stdout...
    testClientSessionImpl.go:48: debug	Reading remaining bytes from stderr...
    conformanceTestSuite.go:157: test complete
    testClientConnectionImpl.go:46: debug	Closing connection...
    serverImpl.go:487: debug	Client disconnected
    networkConnectionHandler.go:220: debug	Client disconnected, waiting for network connection lock...
    networkConnectionHandler.go:228: debug	Client disconnected, waiting for all sessions to terminate...
    networkConnectionHandler.go:238: debug	Disconnecting backend connection...
    networkConnectionHandler.go:247: debug	Backend connection disconnected.
    conformance_test.go:21: Removing container ID 9ec22affd2887ed40797dbbec09c1ac41dbb73cd5017221c81145e4b6ee20a47...
=== RUN   TestConformance/sshproxy/reportingExitCodeShouldWork
    conformance_test.go:21: Creating and starting a container from local build...
    conformance_test.go:21: Building local image...
    docker.go:260: Compiling build context...
    docker.go:262: Build context compiled.
    conformance_test.go:21: Reading build log...
    io.go:425: {"stream":"Step 1/10 : FROM containerssh/agent AS agent"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e 3f3e03864ce3\n"}
        {"aux":{"ID":"sha256:3f3e03864ce385bb4bdc86c6c930f17dc326fe7a704cc0f4a76d049cae2b2ed0"}}
        {"stream":"Step 2/10 : FROM ubuntu:20.04"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e ba6acccedd29\n"}
        {"stream":"Step 3/10 : RUN apt update     \u0026\u0026 apt install -y openssh-server     \u0026\u0026 rm -rf /var/lib/apt/lists/*"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e 17989d1751d4\n"}
    io.go:425: {"stream":"Step 4/10 : RUN mkdir -p /run/sshd"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e 866392f4c527\n"}
    io.go:425: {"stream":"Step 5/10 : COPY init.sh /init.sh"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e d4592b656354\n"}
    io.go:425: {"stream":"Step 6/10 : RUN chmod +x /init.sh"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e d1952592a357\n"}
    io.go:425: {"stream":"Step 7/10 : COPY --from=agent /usr/bin/containerssh-agent /usr/bin/containerssh-agent"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
    io.go:425: {"stream":" ---\u003e b18ad1db4dd0\n"}
        {"stream":"Step 8/10 : HEALTHCHECK --start-period=10s CMD /usr/bin/ssh-keyscan 127.0.0.1"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e 0cd2efeebc4b\n"}
        {"stream":"Step 9/10 : EXPOSE 22"}
    io.go:425: {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e ea8cbca46a43\n"}
        {"stream":"Step 10/10 : CMD [\"/init.sh\"]"}
    io.go:425: {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e dbc9f5d6c6d0\n"}
    io.go:425: {"aux":{"ID":"sha256:dbc9f5d6c6d0808ad84a6fb5a4a82648efef2feed8619a1e744a58f900062d9e"}}
    io.go:425: {"stream":"Successfully built dbc9f5d6c6d0\n"}
    io.go:425: {"stream":"Successfully tagged ssh:latest\n"}
    conformance_test.go:21: Creating container from ssh...
    conformance_test.go:21: Container has ID 91f3f7527671459f3a963b8abde1d082166848dfa5e2eaabb6b2330acc389f3f...
    conformance_test.go:21: Starting container 91f3f7527671459f3a963b8abde1d082166848dfa5e2eaabb6b2330acc389f3f...
    conformance_test.go:21: Waiting for the port mappings to come up...
    conformance_test.go:21: Inspecting container 91f3f7527671459f3a963b8abde1d082166848dfa5e2eaabb6b2330acc389f3f...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 91f3f7527671459f3a963b8abde1d082166848dfa5e2eaabb6b2330acc389f3f...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 91f3f7527671459f3a963b8abde1d082166848dfa5e2eaabb6b2330acc389f3f...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 91f3f7527671459f3a963b8abde1d082166848dfa5e2eaabb6b2330acc389f3f...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 91f3f7527671459f3a963b8abde1d082166848dfa5e2eaabb6b2330acc389f3f...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 91f3f7527671459f3a963b8abde1d082166848dfa5e2eaabb6b2330acc389f3f...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 91f3f7527671459f3a963b8abde1d082166848dfa5e2eaabb6b2330acc389f3f...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 91f3f7527671459f3a963b8abde1d082166848dfa5e2eaabb6b2330acc389f3f...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 91f3f7527671459f3a963b8abde1d082166848dfa5e2eaabb6b2330acc389f3f...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 91f3f7527671459f3a963b8abde1d082166848dfa5e2eaabb6b2330acc389f3f...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 91f3f7527671459f3a963b8abde1d082166848dfa5e2eaabb6b2330acc389f3f...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 91f3f7527671459f3a963b8abde1d082166848dfa5e2eaabb6b2330acc389f3f...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 91f3f7527671459f3a963b8abde1d082166848dfa5e2eaabb6b2330acc389f3f...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 91f3f7527671459f3a963b8abde1d082166848dfa5e2eaabb6b2330acc389f3f...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 91f3f7527671459f3a963b8abde1d082166848dfa5e2eaabb6b2330acc389f3f...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 91f3f7527671459f3a963b8abde1d082166848dfa5e2eaabb6b2330acc389f3f...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 91f3f7527671459f3a963b8abde1d082166848dfa5e2eaabb6b2330acc389f3f...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 91f3f7527671459f3a963b8abde1d082166848dfa5e2eaabb6b2330acc389f3f...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 91f3f7527671459f3a963b8abde1d082166848dfa5e2eaabb6b2330acc389f3f...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 91f3f7527671459f3a963b8abde1d082166848dfa5e2eaabb6b2330acc389f3f...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 91f3f7527671459f3a963b8abde1d082166848dfa5e2eaabb6b2330acc389f3f...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 91f3f7527671459f3a963b8abde1d082166848dfa5e2eaabb6b2330acc389f3f...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 91f3f7527671459f3a963b8abde1d082166848dfa5e2eaabb6b2330acc389f3f...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 91f3f7527671459f3a963b8abde1d082166848dfa5e2eaabb6b2330acc389f3f...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 91f3f7527671459f3a963b8abde1d082166848dfa5e2eaabb6b2330acc389f3f...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 91f3f7527671459f3a963b8abde1d082166848dfa5e2eaabb6b2330acc389f3f...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 91f3f7527671459f3a963b8abde1d082166848dfa5e2eaabb6b2330acc389f3f...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 91f3f7527671459f3a963b8abde1d082166848dfa5e2eaabb6b2330acc389f3f...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 91f3f7527671459f3a963b8abde1d082166848dfa5e2eaabb6b2330acc389f3f...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 91f3f7527671459f3a963b8abde1d082166848dfa5e2eaabb6b2330acc389f3f...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 91f3f7527671459f3a963b8abde1d082166848dfa5e2eaabb6b2330acc389f3f...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 91f3f7527671459f3a963b8abde1d082166848dfa5e2eaabb6b2330acc389f3f...
    conformance_test.go:40: Allocating port 36485 for test TestConformance/sshproxy/reportingExitCodeShouldWork for client
    NewTestServer.go:20: Allocating port 45113 for test TestConformance/sshproxy/reportingExitCodeShouldWork for SSH
    serverImpl.go:75: info	SSH server running on 127.0.0.1:45113
    testClientImpl.go:21: debug	Connecting SSH server...
    serverImpl.go:456: debug	Client connected
    serverImpl.go:217: info	Password authentication for user test successful.
    networkConnectionHandler.go:183: debug	Connecting to backend server 127.0.0.1:49164
    serverImpl.go:479: debug	SSH handshake successful
    testClientConnectionImpl.go:23: debug	Opening session channel..
    sshConnectionHandler.go:47: debug	Opening new session on SSH backend...
    sshConnectionHandler.go:83: debug	Session open on SSH backend...
    serverImpl.go:602: debug	New SSH channel
    testClientSessionImpl.go:180: debug	Executing program 'exit 42'...
    serverImpl.go:697: debug	exec channel request from client
    serverImpl.go:720: debug	exec channel request from client successful
    testClientSessionImpl.go:251: debug	Waiting for session to finish.
    testClientSessionImpl.go:28: debug	Reading remaining bytes from stdout...
    sshChannelHandler.go:74: debug	Received exit status from backend: 42
    channelWrapper.go:52: debug	Program exited with status 42
    sshChannelHandler.go:140: debug	Stderr streaming complete.
    sshChannelHandler.go:150: debug	Stdout streaming complete.
    sshChannelHandler.go:38: debug	Backend closed session.
    sshChannelHandler.go:376: debug	Close received from client, closing backing channel.
    sshChannelHandler.go:383: debug	Backing channel closed.
    sshChannelHandler.go:160: debug	Stdin complete, closing backing session channel...
    sshChannelHandler.go:177: debug	Closed backing session channel.
    testClientSessionImpl.go:48: debug	Reading remaining bytes from stderr...
    conformanceTestSuite.go:227: test complete
    testClientConnectionImpl.go:46: debug	Closing connection...
    serverImpl.go:487: debug	Client disconnected
    networkConnectionHandler.go:220: debug	Client disconnected, waiting for network connection lock...
    networkConnectionHandler.go:228: debug	Client disconnected, waiting for all sessions to terminate...
    networkConnectionHandler.go:238: debug	Disconnecting backend connection...
    networkConnectionHandler.go:247: debug	Backend connection disconnected.
    conformance_test.go:21: Removing container ID 91f3f7527671459f3a963b8abde1d082166848dfa5e2eaabb6b2330acc389f3f...
=== RUN   TestConformance/sshproxy/sendingSignalsShouldWork
    conformance_test.go:21: Creating and starting a container from local build...
    conformance_test.go:21: Building local image...
    docker.go:260: Compiling build context...
    docker.go:262: Build context compiled.
    conformance_test.go:21: Reading build log...
    io.go:425: {"stream":"Step 1/10 : FROM containerssh/agent AS agent"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e 3f3e03864ce3\n"}
        {"aux":{"ID":"sha256:3f3e03864ce385bb4bdc86c6c930f17dc326fe7a704cc0f4a76d049cae2b2ed0"}}
    io.go:425: {"stream":"Step 2/10 : FROM ubuntu:20.04"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e ba6acccedd29\n"}
        {"stream":"Step 3/10 : RUN apt update     \u0026\u0026 apt install -y openssh-server     \u0026\u0026 rm -rf /var/lib/apt/lists/*"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e 17989d1751d4\n"}
        {"stream":"Step 4/10 : RUN mkdir -p /run/sshd"}
    io.go:425: {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e 866392f4c527\n"}
    io.go:425: {"stream":"Step 5/10 : COPY init.sh /init.sh"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e d4592b656354\n"}
        {"stream":"Step 6/10 : RUN chmod +x /init.sh"}
    io.go:425: {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e d1952592a357\n"}
    io.go:425: {"stream":"Step 7/10 : COPY --from=agent /usr/bin/containerssh-agent /usr/bin/containerssh-agent"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
    io.go:425: {"stream":" ---\u003e b18ad1db4dd0\n"}
        {"stream":"Step 8/10 : HEALTHCHECK --start-period=10s CMD /usr/bin/ssh-keyscan 127.0.0.1"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e 0cd2efeebc4b\n"}
        {"stream":"Step 9/10 : EXPOSE 22"}
    io.go:425: {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e ea8cbca46a43\n"}
    io.go:425: {"stream":"Step 10/10 : CMD [\"/init.sh\"]"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e dbc9f5d6c6d0\n"}
    io.go:425: {"aux":{"ID":"sha256:dbc9f5d6c6d0808ad84a6fb5a4a82648efef2feed8619a1e744a58f900062d9e"}}
    io.go:425: {"stream":"Successfully built dbc9f5d6c6d0\n"}
    io.go:425: {"stream":"Successfully tagged ssh:latest\n"}
    conformance_test.go:21: Creating container from ssh...
    conformance_test.go:21: Container has ID 8ed9be1fb733842a797d15db6322080765262460d0dead439edc3de75e8e7a97...
    conformance_test.go:21: Starting container 8ed9be1fb733842a797d15db6322080765262460d0dead439edc3de75e8e7a97...
    conformance_test.go:21: Waiting for the port mappings to come up...
    conformance_test.go:21: Inspecting container 8ed9be1fb733842a797d15db6322080765262460d0dead439edc3de75e8e7a97...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 8ed9be1fb733842a797d15db6322080765262460d0dead439edc3de75e8e7a97...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 8ed9be1fb733842a797d15db6322080765262460d0dead439edc3de75e8e7a97...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 8ed9be1fb733842a797d15db6322080765262460d0dead439edc3de75e8e7a97...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 8ed9be1fb733842a797d15db6322080765262460d0dead439edc3de75e8e7a97...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 8ed9be1fb733842a797d15db6322080765262460d0dead439edc3de75e8e7a97...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 8ed9be1fb733842a797d15db6322080765262460d0dead439edc3de75e8e7a97...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 8ed9be1fb733842a797d15db6322080765262460d0dead439edc3de75e8e7a97...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 8ed9be1fb733842a797d15db6322080765262460d0dead439edc3de75e8e7a97...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 8ed9be1fb733842a797d15db6322080765262460d0dead439edc3de75e8e7a97...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 8ed9be1fb733842a797d15db6322080765262460d0dead439edc3de75e8e7a97...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 8ed9be1fb733842a797d15db6322080765262460d0dead439edc3de75e8e7a97...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 8ed9be1fb733842a797d15db6322080765262460d0dead439edc3de75e8e7a97...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 8ed9be1fb733842a797d15db6322080765262460d0dead439edc3de75e8e7a97...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 8ed9be1fb733842a797d15db6322080765262460d0dead439edc3de75e8e7a97...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 8ed9be1fb733842a797d15db6322080765262460d0dead439edc3de75e8e7a97...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 8ed9be1fb733842a797d15db6322080765262460d0dead439edc3de75e8e7a97...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 8ed9be1fb733842a797d15db6322080765262460d0dead439edc3de75e8e7a97...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 8ed9be1fb733842a797d15db6322080765262460d0dead439edc3de75e8e7a97...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 8ed9be1fb733842a797d15db6322080765262460d0dead439edc3de75e8e7a97...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 8ed9be1fb733842a797d15db6322080765262460d0dead439edc3de75e8e7a97...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 8ed9be1fb733842a797d15db6322080765262460d0dead439edc3de75e8e7a97...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 8ed9be1fb733842a797d15db6322080765262460d0dead439edc3de75e8e7a97...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 8ed9be1fb733842a797d15db6322080765262460d0dead439edc3de75e8e7a97...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 8ed9be1fb733842a797d15db6322080765262460d0dead439edc3de75e8e7a97...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 8ed9be1fb733842a797d15db6322080765262460d0dead439edc3de75e8e7a97...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 8ed9be1fb733842a797d15db6322080765262460d0dead439edc3de75e8e7a97...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 8ed9be1fb733842a797d15db6322080765262460d0dead439edc3de75e8e7a97...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 8ed9be1fb733842a797d15db6322080765262460d0dead439edc3de75e8e7a97...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 8ed9be1fb733842a797d15db6322080765262460d0dead439edc3de75e8e7a97...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 8ed9be1fb733842a797d15db6322080765262460d0dead439edc3de75e8e7a97...
    conformance_test.go:21: Container is not healthy yet, health is starting...
    conformance_test.go:21: Inspecting container 8ed9be1fb733842a797d15db6322080765262460d0dead439edc3de75e8e7a97...
    conformance_test.go:40: Allocating port 45715 for test TestConformance/sshproxy/sendingSignalsShouldWork for client
    NewTestServer.go:20: Allocating port 33133 for test TestConformance/sshproxy/sendingSignalsShouldWork for SSH
    serverImpl.go:75: info	SSH server running on 127.0.0.1:33133
    testClientImpl.go:21: debug	Connecting SSH server...
    serverImpl.go:456: debug	Client connected
    serverImpl.go:217: info	Password authentication for user test successful.
    networkConnectionHandler.go:183: debug	Connecting to backend server 127.0.0.1:49165
    serverImpl.go:479: debug	SSH handshake successful
    testClientConnectionImpl.go:23: debug	Opening session channel..
    sshConnectionHandler.go:47: debug	Opening new session on SSH backend...
    sshConnectionHandler.go:83: debug	Session open on SSH backend...
    serverImpl.go:602: debug	New SSH channel
    testClientSessionImpl.go:180: debug	Executing program '/usr/bin/containerssh-agent wait-signal --signal USR1 --message "USR1 received"'...
    serverImpl.go:697: debug	exec channel request from client
    serverImpl.go:720: debug	exec channel request from client successful
    testClientSessionImpl.go:105: debug	Sending USR1 signal to process...
    testClientSessionImpl.go:219: debug	Waiting for the following string on stdout: USR1 received
    serverImpl.go:697: debug	signal channel request from client
    serverImpl.go:720: debug	signal channel request from client successful
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 1 bytes: U
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 2 bytes: US
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 3 bytes: USR
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 4 bytes: USR1
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 5 bytes: USR1 
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 6 bytes: USR1 r
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 7 bytes: USR1 re
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 8 bytes: USR1 rec
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 9 bytes: USR1 rece
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 10 bytes: USR1 recei
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 11 bytes: USR1 receiv
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 12 bytes: USR1 receive
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 13 bytes: USR1 received
    testClientSessionImpl.go:28: debug	Reading remaining bytes from stdout...
    sshChannelHandler.go:140: debug	Stderr streaming complete.
    sshChannelHandler.go:150: debug	Stdout streaming complete.
    sshChannelHandler.go:74: debug	Received exit status from backend: 0
    channelWrapper.go:52: debug	Program exited with status 0
    sshChannelHandler.go:38: debug	Backend closed session.
    sshChannelHandler.go:160: debug	Stdin complete, closing backing session channel...
    sshChannelHandler.go:177: debug	Closed backing session channel.
    sshChannelHandler.go:376: debug	Close received from client, closing backing channel.
    sshChannelHandler.go:383: debug	Backing channel closed.
    testClientSessionImpl.go:251: debug	Waiting for session to finish.
    testClientSessionImpl.go:28: debug	Reading remaining bytes from stdout...
    testClientSessionImpl.go:48: debug	Reading remaining bytes from stderr...
    conformanceTestSuite.go:277: test complete
    testClientConnectionImpl.go:46: debug	Closing connection...
    serverImpl.go:487: debug	Client disconnected
    networkConnectionHandler.go:220: debug	Client disconnected, waiting for network connection lock...
    networkConnectionHandler.go:228: debug	Client disconnected, waiting for all sessions to terminate...
    networkConnectionHandler.go:238: debug	Disconnecting backend connection...
    networkConnectionHandler.go:247: debug	Backend connection disconnected.
    conformance_test.go:21: Removing container ID 8ed9be1fb733842a797d15db6322080765262460d0dead439edc3de75e8e7a97...
--- PASS: TestConformance (189.11s)
    --- PASS: TestConformance/sshproxy (189.11s)
        --- PASS: TestConformance/sshproxy/singleProgramShouldRun (34.73s)
        --- PASS: TestConformance/sshproxy/settingEnvVariablesShouldWork (34.58s)
        --- PASS: TestConformance/sshproxy/runningInteractiveShellShouldWork (46.29s)
        --- PASS: TestConformance/sshproxy/reportingExitCodeShouldWork (36.11s)
        --- PASS: TestConformance/sshproxy/sendingSignalsShouldWork (37.39s)
PASS
ok  	github.com/containerssh/libcontainerssh/internal/sshproxy	189.113s
=== RUN   TestReadyRejection
--- PASS: TestReadyRejection (0.74s)
=== RUN   TestAuthFailed
    Server_test.go:56: Allocating port 41909 for test TestAuthFailed for SSH
    serverImpl.go:75: info	SSH server running on 127.0.0.1:41909
    serverImpl.go:456: debug	Client connected
    serverImpl.go:204: info	Password authentication for user foo failed. (authentication failed)
    serverImpl.go:469: info	SSH handshake failed ([ssh: no auth passed yet, Password authentication for user foo failed. (authentication failed)])
    serverImpl.go:472: debug	Client disconnected
--- PASS: TestAuthFailed (61.41s)
=== RUN   TestAuthKeyboardInteractive
    NewTestServer.go:20: Allocating port 44547 for test TestAuthKeyboardInteractive for SSH
    serverImpl.go:75: info	SSH server running on 127.0.0.1:44547
    testClientImpl.go:21: debug	Connecting SSH server...
    serverImpl.go:456: debug	Client connected
    serverImpl.go:204: info	Keyboard-interactive authentication for user test failed. (invalid response)
    serverImpl.go:469: info	SSH handshake failed ([ssh: no auth passed yet, Keyboard-interactive authentication for user test failed. (invalid response)])
    serverImpl.go:472: debug	Client disconnected
    testClientImpl.go:21: debug	Connecting SSH server...
    serverImpl.go:456: debug	Client connected
    serverImpl.go:217: info	Keyboard-interactive authentication for user test successful.
    serverImpl.go:479: debug	SSH handshake successful
    testClientConnectionImpl.go:46: debug	Closing connection...
    serverImpl.go:487: debug	Client disconnected
--- PASS: TestAuthKeyboardInteractive (2.11s)
=== RUN   TestSessionSuccess
    Server_test.go:136: Allocating port 33389 for test TestSessionSuccess for SSH
    serverImpl.go:75: info	SSH server running on 127.0.0.1:33389
    serverImpl.go:456: debug	Client connected
    serverImpl.go:217: info	Password authentication for user foo successful.
    serverImpl.go:479: debug	SSH handshake successful
    serverImpl.go:602: debug	New SSH channel
    serverImpl.go:697: debug	env channel request from client
    serverImpl.go:720: debug	env channel request from client successful
    serverImpl.go:697: debug	shell channel request from client
    serverImpl.go:720: debug	shell channel request from client successful
    channelWrapper.go:52: debug	Program exited with status 0
    serverImpl.go:487: debug	Client disconnected
--- PASS: TestSessionSuccess (60.61s)
=== RUN   TestSessionError
    Server_test.go:171: Allocating port 34331 for test TestSessionError for SSH
    serverImpl.go:75: info	SSH server running on 127.0.0.1:34331
    serverImpl.go:456: debug	Client connected
    serverImpl.go:217: info	Password authentication for user foo successful.
    serverImpl.go:479: debug	SSH handshake successful
    serverImpl.go:602: debug	New SSH channel
    serverImpl.go:697: debug	env channel request from client
    serverImpl.go:720: debug	env channel request from client successful
    serverImpl.go:697: debug	shell channel request from client
    serverImpl.go:720: debug	shell channel request from client successful
    channelWrapper.go:52: debug	Program exited with status 1
    serverImpl.go:487: debug	Client disconnected
--- PASS: TestSessionError (61.94s)
=== RUN   TestPubKey
    Server_test.go:206: Allocating port 39405 for test TestPubKey for SSH
    serverImpl.go:75: info	SSH server running on 127.0.0.1:39405
    serverImpl.go:456: debug	Client connected
    serverImpl.go:217: info	Public key authentication for user foo successful.
    serverImpl.go:479: debug	SSH handshake successful
    serverImpl.go:602: debug	New SSH channel
    serverImpl.go:697: debug	env channel request from client
    serverImpl.go:720: debug	env channel request from client successful
    serverImpl.go:697: debug	shell channel request from client
    serverImpl.go:720: debug	shell channel request from client successful
    channelWrapper.go:52: debug	Program exited with status 0
    serverImpl.go:487: debug	Client disconnected
--- PASS: TestPubKey (64.39s)
=== RUN   TestProperShutdown
    NewTestServer.go:20: Allocating port 34551 for test TestProperShutdown for SSH
    serverImpl.go:75: info	SSH server running on 127.0.0.1:34551
    testClientImpl.go:21: debug	Connecting SSH server...
    serverImpl.go:456: debug	Client connected
    serverImpl.go:217: info	Password authentication for user foo successful.
    serverImpl.go:479: debug	SSH handshake successful
    testClientConnectionImpl.go:23: debug	Opening session channel..
    serverImpl.go:602: debug	New SSH channel
    testClientSessionImpl.go:163: debug	Requesting PTY for term xterm cols 80 rows 25...
    serverImpl.go:697: debug	pty-req channel request from client
    serverImpl.go:720: debug	pty-req channel request from client successful
    testClientSessionImpl.go:172: debug	Executing shell...
    serverImpl.go:697: debug	shell channel request from client
    serverImpl.go:720: debug	shell channel request from client successful
    testClientSessionImpl.go:219: debug	Waiting for the following string on stdout: > 
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 1 bytes: >
    testClientSessionImpl.go:239: debug	Ringbuffer currently contains the following 2 bytes: > 
    testClientSessionImpl.go:251: debug	Waiting for session to finish.
    testClientSessionImpl.go:28: debug	Reading remaining bytes from stdout...
    channelWrapper.go:52: debug	Program exited with status 0
    testClientSessionImpl.go:48: debug	Reading remaining bytes from stderr...
    testClientConnectionImpl.go:46: debug	Closing connection...
    serverImpl.go:487: debug	Client disconnected
--- PASS: TestProperShutdown (3.49s)
PASS
ok  	github.com/containerssh/libcontainerssh/internal/sshserver	254.709s
=== RUN   TestCopy
--- PASS: TestCopy (0.00s)
=== RUN   TestDefaultsShouldSetDefaults
--- PASS: TestDefaultsShouldSetDefaults (0.00s)
=== RUN   TestMerge
--- PASS: TestMerge (0.00s)
=== RUN   TestMergeExisting
--- PASS: TestMergeExisting (0.00s)
=== RUN   TestMergeExistingEmpty
--- PASS: TestMergeExistingEmpty (0.00s)
=== RUN   TestMergeExistingEmpty2
--- PASS: TestMergeExistingEmpty2 (0.00s)
=== RUN   TestMergeBool
--- PASS: TestMergeBool (0.00s)
=== RUN   TestMergeStringSlice
--- PASS: TestMergeStringSlice (0.00s)
PASS
ok  	github.com/containerssh/libcontainerssh/internal/structutils	0.002s
=== RUN   TestKerberos
    kerberos_test.go:26: Creating and starting a container from local build...
    kerberos_test.go:26: Building local image...
    docker.go:260: Compiling build context...
    docker.go:262: Build context compiled.
    kerberos_test.go:26: Reading build log...
    io.go:425: {"stream":"Step 1/12 : FROM ubuntu:20.04"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e ba6acccedd29\n"}
        {"stream":"Step 2/12 : RUN echo -e \"\\e[32mInstalling Kerberos KDC and admin server...\\e[0m\" \u0026\u0026     DEBIAN_FRONTEND=noninteractive apt update \u0026\u0026     DEBIAN_FRONTEND=noninteractive apt install -y krb5-kdc krb5-admin-server \u0026\u0026     rm -rf /var/lib/apt/lists/*"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e 3ef4e64e02fb\n"}
        {"stream":"Step 3/12 : ADD root /"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e ce725428a6ee\n"}
        {"stream":"Step 4/12 : RUN echo -e \"\\e[32mCreating Kerberos database...\\e[0m\" \u0026\u0026     kdb5_util create -r TESTING.CONTAINERSSH.IO -s -P testing"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e 4ff94d76bc81\n"}
        {"stream":"Step 5/12 : RUN echo -e \"\\e[32mAdding Kerberos admin user...\\e[0m\" \u0026\u0026     kadmin.local -q \"addprinc -pw testing admin\""}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e 2ac3158e8a9c\n"}
    io.go:425: {"stream":"Step 6/12 : CMD [\"/usr/local/bin/init.sh\"]"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e e427518b5385\n"}
    io.go:425: {"stream":"Step 7/12 : EXPOSE 88"}
        {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e e552ac5ac1c9\n"}
        {"stream":"Step 8/12 : EXPOSE 88/udp"}
    io.go:425: {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e 3e7c3aa6398f\n"}
        {"stream":"Step 9/12 : EXPOSE 464"}
    io.go:425: {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e e7e50df5bc39\n"}
        {"stream":"Step 10/12 : EXPOSE 464/udp"}
    io.go:425: {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e 385c6d5845d2\n"}
        {"stream":"Step 11/12 : EXPOSE 750"}
    io.go:425: {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e 09ed04a5f778\n"}
        {"stream":"Step 12/12 : EXPOSE 750/udp"}
    io.go:425: {"stream":"\n"}
    io.go:425: {"stream":" ---\u003e Using cache\n"}
        {"stream":" ---\u003e 73398b453754\n"}
    io.go:425: {"aux":{"ID":"sha256:73398b45375472e95a9cbc018f06601b3b7cee5c496b474436a05420f15eba77"}}
    io.go:425: {"stream":"Successfully built 73398b453754\n"}
    io.go:425: {"stream":"Successfully tagged krb:latest\n"}
    kerberos_test.go:26: Creating container from krb...
    kerberos_test.go:26: Container has ID cf9b83d865938cbc70c7cdd51f29377a5bfbd65227790b456f586fe64f4b1c32...
    kerberos_test.go:26: Starting container cf9b83d865938cbc70c7cdd51f29377a5bfbd65227790b456f586fe64f4b1c32...
    kerberos_test.go:26: Waiting for the port mappings to come up...
    kerberos_test.go:26: Inspecting container cf9b83d865938cbc70c7cdd51f29377a5bfbd65227790b456f586fe64f4b1c32...
    kerberos.go:128: Waiting for the KDC to come up...
    kerberos_test.go:26: Removing container ID cf9b83d865938cbc70c7cdd51f29377a5bfbd65227790b456f586fe64f4b1c32...
--- PASS: TestKerberos (5.63s)
=== RUN   TestKubernetes
    kubernetes_test.go:16: Loading kubeconfig from user home directory failed, falling back to launching a KinD cluster (kubectl configuration does not exist in /nonexistent/.kube/config (stat /nonexistent/.kube/config: no such file or directory))
    create.go:98: Creating cluster "testkubernetes" ...
    status.go:68:  • Ensuring node image (kindest/node:v1.21.1) 🖼  ...
    images.go:58: Image: kindest/node:v1.21.1@sha256:69860bda5563ac81e3c0057d654b5253219618a22ec3a346306239bba8cfa1a6 present locally
    status.go:84:  ✓ Ensuring node image (kindest/node:v1.21.1) 🖼
    status.go:68:  • Preparing nodes 📦   ...
    status.go:84:  ✓ Preparing nodes 📦 
    status.go:68:  • Writing configuration 📜  ...
    config.go:96: Using the following kubeadm config for node testkubernetes-control-plane:
        apiServer:
          certSANs:
          - localhost
          - 127.0.0.1
          extraArgs:
            runtime-config: ""
        apiVersion: kubeadm.k8s.io/v1beta2
        clusterName: testkubernetes
        controlPlaneEndpoint: testkubernetes-control-plane:6443
        controllerManager:
          extraArgs:
            enable-hostpath-provisioner: "true"
        kind: ClusterConfiguration
        kubernetesVersion: v1.21.1
        networking:
          podSubnet: 10.244.0.0/16
          serviceSubnet: 10.96.0.0/16
        scheduler:
          extraArgs: null
        ---
        apiVersion: kubeadm.k8s.io/v1beta2
        bootstrapTokens:
        - token: abcdef.0123456789abcdef
        kind: InitConfiguration
        localAPIEndpoint:
          advertiseAddress: 172.18.0.2
          bindPort: 6443
        nodeRegistration:
          criSocket: unix:///run/containerd/containerd.sock
          kubeletExtraArgs:
            fail-swap-on: "false"
            node-ip: 172.18.0.2
            node-labels: ""
            provider-id: kind://docker/testkubernetes/testkubernetes-control-plane
        ---
        apiVersion: kubeadm.k8s.io/v1beta2
        controlPlane:
          localAPIEndpoint:
            advertiseAddress: 172.18.0.2
            bindPort: 6443
        discovery:
          bootstrapToken:
            apiServerEndpoint: testkubernetes-control-plane:6443
            token: abcdef.0123456789abcdef
            unsafeSkipCAVerification: true
        kind: JoinConfiguration
        nodeRegistration:
          criSocket: unix:///run/containerd/containerd.sock
          kubeletExtraArgs:
            fail-swap-on: "false"
            node-ip: 172.18.0.2
            node-labels: ""
            provider-id: kind://docker/testkubernetes/testkubernetes-control-plane
        ---
        apiVersion: kubelet.config.k8s.io/v1beta1
        cgroupDriver: cgroupfs
        evictionHard:
          imagefs.available: 0%
          nodefs.available: 0%
          nodefs.inodesFree: 0%
        imageGCHighThresholdPercent: 100
        kind: KubeletConfiguration
        ---
        apiVersion: kubeproxy.config.k8s.io/v1alpha1
        conntrack:
          maxPerCore: 0
        iptables:
          minSyncPeriod: 1s
        kind: KubeProxyConfiguration
        mode: iptables
    status.go:84:  ✓ Writing configuration 📜
    status.go:68:  • Starting control-plane 🕹️  ...
    init.go:81: I1208 20:23:07.492021     218 initconfiguration.go:246] loading configuration from "/kind/kubeadm.conf"
        [config] WARNING: Ignored YAML document with GroupVersionKind kubeadm.k8s.io/v1beta2, Kind=JoinConfiguration
        [init] Using Kubernetes version: v1.21.1
        [certs] Using certificateDir folder "/etc/kubernetes/pki"
        I1208 20:23:07.496697     218 certs.go:110] creating a new certificate authority for ca
        [certs] Generating "ca" certificate and key
        I1208 20:23:07.589101     218 certs.go:487] validating certificate period for ca certificate
        [certs] Generating "apiserver" certificate and key
        [certs] apiserver serving cert is signed for DNS names [kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local localhost testkubernetes-control-plane] and IPs [10.96.0.1 172.18.0.2 127.0.0.1]
        [certs] Generating "apiserver-kubelet-client" certificate and key
        I1208 20:23:07.811093     218 certs.go:110] creating a new certificate authority for front-proxy-ca
        [certs] Generating "front-proxy-ca" certificate and key
        I1208 20:23:07.847354     218 certs.go:487] validating certificate period for front-proxy-ca certificate
        [certs] Generating "front-proxy-client" certificate and key
        I1208 20:23:07.977257     218 certs.go:110] creating a new certificate authority for etcd-ca
        [certs] Generating "etcd/ca" certificate and key
        I1208 20:23:08.068510     218 certs.go:487] validating certificate period for etcd/ca certificate
        [certs] Generating "etcd/server" certificate and key
        [certs] etcd/server serving cert is signed for DNS names [localhost testkubernetes-control-plane] and IPs [172.18.0.2 127.0.0.1 ::1]
        [certs] Generating "etcd/peer" certificate and key
        [certs] etcd/peer serving cert is signed for DNS names [localhost testkubernetes-control-plane] and IPs [172.18.0.2 127.0.0.1 ::1]
        [certs] Generating "etcd/healthcheck-client" certificate and key
        [certs] Generating "apiserver-etcd-client" certificate and key
        I1208 20:23:08.866742     218 certs.go:76] creating new public/private key files for signing service account users
        [certs] Generating "sa" key and public key
        [kubeconfig] Using kubeconfig folder "/etc/kubernetes"
        I1208 20:23:08.920477     218 kubeconfig.go:101] creating kubeconfig file for admin.conf
        [kubeconfig] Writing "admin.conf" kubeconfig file
        I1208 20:23:08.974362     218 kubeconfig.go:101] creating kubeconfig file for kubelet.conf
        [kubeconfig] Writing "kubelet.conf" kubeconfig file
        I1208 20:23:09.312375     218 kubeconfig.go:101] creating kubeconfig file for controller-manager.conf
        [kubeconfig] Writing "controller-manager.conf" kubeconfig file
        I1208 20:23:09.425105     218 kubeconfig.go:101] creating kubeconfig file for scheduler.conf
        [kubeconfig] Writing "scheduler.conf" kubeconfig file
        I1208 20:23:09.505873     218 kubelet.go:63] Stopping the kubelet
        [kubelet-start] Writing kubelet environment file with flags to file "/var/lib/kubelet/kubeadm-flags.env"
        [kubelet-start] Writing kubelet configuration to file "/var/lib/kubelet/config.yaml"
        [kubelet-start] Starting the kubelet
        [control-plane] Using manifest folder "/etc/kubernetes/manifests"
        [control-plane] Creating static Pod manifest for "kube-apiserver"
        I1208 20:23:09.548595     218 manifests.go:96] [control-plane] getting StaticPodSpecs
        I1208 20:23:09.548871     218 certs.go:487] validating certificate period for CA certificate
        I1208 20:23:09.548946     218 manifests.go:109] [control-plane] adding volume "ca-certs" for component "kube-apiserver"
        I1208 20:23:09.548957     218 manifests.go:109] [control-plane] adding volume "etc-ca-certificates" for component "kube-apiserver"
        I1208 20:23:09.548962     218 manifests.go:109] [control-plane] adding volume "k8s-certs" for component "kube-apiserver"
        I1208 20:23:09.548965     218 manifests.go:109] [control-plane] adding volume "usr-local-share-ca-certificates" for component "kube-apiserver"
        I1208 20:23:09.548970     218 manifests.go:109] [control-plane] adding volume "usr-share-ca-certificates" for component "kube-apiserver"
        I1208 20:23:09.553976     218 manifests.go:126] [control-plane] wrote static Pod manifest for component "kube-apiserver" to "/etc/kubernetes/manifests/kube-apiserver.yaml"
        I1208 20:23:09.553988     218 manifests.go:96] [control-plane] getting StaticPodSpecs
        [control-plane] Creating static Pod manifest for "kube-controller-manager"
        I1208 20:23:09.554146     218 manifests.go:109] [control-plane] adding volume "ca-certs" for component "kube-controller-manager"
        I1208 20:23:09.554152     218 manifests.go:109] [control-plane] adding volume "etc-ca-certificates" for component "kube-controller-manager"
        I1208 20:23:09.554155     218 manifests.go:109] [control-plane] adding volume "flexvolume-dir" for component "kube-controller-manager"
        I1208 20:23:09.554158     218 manifests.go:109] [control-plane] adding volume "k8s-certs" for component "kube-controller-manager"
        I1208 20:23:09.554161     218 manifests.go:109] [control-plane] adding volume "kubeconfig" for component "kube-controller-manager"
        I1208 20:23:09.554163     218 manifests.go:109] [control-plane] adding volume "usr-local-share-ca-certificates" for component "kube-controller-manager"
        I1208 20:23:09.554167     218 manifests.go:109] [control-plane] adding volume "usr-share-ca-certificates" for component "kube-controller-manager"
        I1208 20:23:09.554606     218 manifests.go:126] [control-plane] wrote static Pod manifest for component "kube-controller-manager" to "/etc/kubernetes/manifests/kube-controller-manager.yaml"
        I1208 20:23:09.554614     218 manifests.go:96] [control-plane] getting StaticPodSpecs
        [control-plane] Creating static Pod manifest for "kube-scheduler"
        I1208 20:23:09.554742     218 manifests.go:109] [control-plane] adding volume "kubeconfig" for component "kube-scheduler"
        I1208 20:23:09.555003     218 manifests.go:126] [control-plane] wrote static Pod manifest for component "kube-scheduler" to "/etc/kubernetes/manifests/kube-scheduler.yaml"
        [etcd] Creating static Pod manifest for local etcd in "/etc/kubernetes/manifests"
        I1208 20:23:09.555371     218 local.go:74] [etcd] wrote Static Pod manifest for a local etcd member to "/etc/kubernetes/manifests/etcd.yaml"
        I1208 20:23:09.555378     218 waitcontrolplane.go:87] [wait-control-plane] Waiting for the API server to be healthy
        I1208 20:23:09.555794     218 loader.go:372] Config loaded from file:  /etc/kubernetes/admin.conf
        [wait-control-plane] Waiting for the kubelet to boot up the control plane as static Pods from directory "/etc/kubernetes/manifests". This can take up to 4m0s
        I1208 20:23:09.556468     218 round_trippers.go:454] GET https://testkubernetes-control-plane:6443/healthz?timeout=10s  in 0 milliseconds
        I1208 20:23:10.057337     218 round_trippers.go:454] GET https://testkubernetes-control-plane:6443/healthz?timeout=10s  in 0 milliseconds
        I1208 20:23:10.558724     218 round_trippers.go:454] GET https://testkubernetes-control-plane:6443/healthz?timeout=10s  in 1 milliseconds
        I1208 20:23:11.057373     218 round_trippers.go:454] GET https://testkubernetes-control-plane:6443/healthz?timeout=10s  in 0 milliseconds
        I1208 20:23:11.557725     218 round_trippers.go:454] GET https://testkubernetes-control-plane:6443/healthz?timeout=10s  in 0 milliseconds
        I1208 20:23:12.057617     218 round_trippers.go:454] GET https://testkubernetes-control-plane:6443/healthz?timeout=10s  in 0 milliseconds
        I1208 20:23:12.557446     218 round_trippers.go:454] GET https://testkubernetes-control-plane:6443/healthz?timeout=10s  in 0 milliseconds
        I1208 20:23:13.057321     218 round_trippers.go:454] GET https://testkubernetes-control-plane:6443/healthz?timeout=10s  in 0 milliseconds
        I1208 20:23:13.557833     218 round_trippers.go:454] GET https://testkubernetes-control-plane:6443/healthz?timeout=10s  in 0 milliseconds
        I1208 20:23:14.058677     218 round_trippers.go:454] GET https://testkubernetes-control-plane:6443/healthz?timeout=10s  in 1 milliseconds
        I1208 20:23:14.557560     218 round_trippers.go:454] GET https://testkubernetes-control-plane:6443/healthz?timeout=10s  in 0 milliseconds
        I1208 20:23:15.057376     218 round_trippers.go:454] GET https://testkubernetes-control-plane:6443/healthz?timeout=10s  in 0 milliseconds
        I1208 20:23:15.557162     218 round_trippers.go:454] GET https://testkubernetes-control-plane:6443/healthz?timeout=10s  in 0 milliseconds
        I1208 20:23:16.057710     218 round_trippers.go:454] GET https://testkubernetes-control-plane:6443/healthz?timeout=10s  in 0 milliseconds
        I1208 20:23:16.557674     218 round_trippers.go:454] GET https://testkubernetes-control-plane:6443/healthz?timeout=10s  in 0 milliseconds
        I1208 20:23:17.057483     218 round_trippers.go:454] GET https://testkubernetes-control-plane:6443/healthz?timeout=10s  in 0 milliseconds
        I1208 20:23:17.557262     218 round_trippers.go:454] GET https://testkubernetes-control-plane:6443/healthz?timeout=10s  in 0 milliseconds
        I1208 20:23:18.056898     218 round_trippers.go:454] GET https://testkubernetes-control-plane:6443/healthz?timeout=10s  in 0 milliseconds
        I1208 20:23:18.557675     218 round_trippers.go:454] GET https://testkubernetes-control-plane:6443/healthz?timeout=10s  in 0 milliseconds
        I1208 20:23:19.057547     218 round_trippers.go:454] GET https://testkubernetes-control-plane:6443/healthz?timeout=10s  in 0 milliseconds
        I1208 20:23:19.557448     218 round_trippers.go:454] GET https://testkubernetes-control-plane:6443/healthz?timeout=10s  in 0 milliseconds
        I1208 20:23:20.057377     218 round_trippers.go:454] GET https://testkubernetes-control-plane:6443/healthz?timeout=10s  in 0 milliseconds
        I1208 20:23:20.558061     218 round_trippers.go:454] GET https://testkubernetes-control-plane:6443/healthz?timeout=10s  in 0 milliseconds
        I1208 20:23:21.057774     218 round_trippers.go:454] GET https://testkubernetes-control-plane:6443/healthz?timeout=10s  in 0 milliseconds
        I1208 20:23:21.557149     218 round_trippers.go:454] GET https://testkubernetes-control-plane:6443/healthz?timeout=10s  in 0 milliseconds
        I1208 20:23:22.063637     218 round_trippers.go:454] GET https://testkubernetes-control-plane:6443/healthz?timeout=10s  in 3 milliseconds
        I1208 20:23:22.557663     218 round_trippers.go:454] GET https://testkubernetes-control-plane:6443/healthz?timeout=10s  in 0 milliseconds
        I1208 20:23:26.242611     218 round_trippers.go:454] GET https://testkubernetes-control-plane:6443/healthz?timeout=10s 500 Internal Server Error in 3185 milliseconds
        I1208 20:23:26.558191     218 round_trippers.go:454] GET https://testkubernetes-control-plane:6443/healthz?timeout=10s 500 Internal Server Error in 0 milliseconds
        I1208 20:23:27.058304     218 round_trippers.go:454] GET https://testkubernetes-control-plane:6443/healthz?timeout=10s 500 Internal Server Error in 0 milliseconds
        I1208 20:23:27.557130     218 round_trippers.go:454] GET https://testkubernetes-control-plane:6443/healthz?timeout=10s 200 OK in 0 milliseconds
        I1208 20:23:27.557163     218 uploadconfig.go:108] [upload-config] Uploading the kubeadm ClusterConfiguration to a ConfigMap
        [apiclient] All control plane components are healthy after 18.000974 seconds
        [upload-config] Storing the configuration used in ConfigMap "kubeadm-config" in the "kube-system" Namespace
        I1208 20:23:27.560363     218 round_trippers.go:454] POST https://testkubernetes-control-plane:6443/api/v1/namespaces/kube-system/configmaps?timeout=10s 201 Created in 1 milliseconds
        I1208 20:23:27.562817     218 round_trippers.go:454] POST https://testkubernetes-control-plane:6443/apis/rbac.authorization.k8s.io/v1/namespaces/kube-system/roles?timeout=10s 201 Created in 2 milliseconds
        I1208 20:23:27.564452     218 round_trippers.go:454] POST https://testkubernetes-control-plane:6443/apis/rbac.authorization.k8s.io/v1/namespaces/kube-system/rolebindings?timeout=10s 201 Created in 1 milliseconds
        I1208 20:23:27.564720     218 uploadconfig.go:122] [upload-config] Uploading the kubelet component config to a ConfigMap
        [kubelet] Creating a ConfigMap "kubelet-config-1.21" in namespace kube-system with the configuration for the kubelets in the cluster
        I1208 20:23:27.566162     218 round_trippers.go:454] POST https://testkubernetes-control-plane:6443/api/v1/namespaces/kube-system/configmaps?timeout=10s 201 Created in 1 milliseconds
        I1208 20:23:27.567150     218 round_trippers.go:454] POST https://testkubernetes-control-plane:6443/apis/rbac.authorization.k8s.io/v1/namespaces/kube-system/roles?timeout=10s 201 Created in 0 milliseconds
        I1208 20:23:27.568097     218 round_trippers.go:454] POST https://testkubernetes-control-plane:6443/apis/rbac.authorization.k8s.io/v1/namespaces/kube-system/rolebindings?timeout=10s 201 Created in 0 milliseconds
        I1208 20:23:27.568150     218 uploadconfig.go:127] [upload-config] Preserving the CRISocket information for the control-plane node
        I1208 20:23:27.568156     218 patchnode.go:30] [patchnode] Uploading the CRI Socket information "unix:///run/containerd/containerd.sock" to the Node API object "testkubernetes-control-plane" as an annotation
        I1208 20:23:28.070490     218 round_trippers.go:454] GET https://testkubernetes-control-plane:6443/api/v1/nodes/testkubernetes-control-plane?timeout=10s 200 OK in 1 milliseconds
        I1208 20:23:28.074169     218 round_trippers.go:454] PATCH https://testkubernetes-control-plane:6443/api/v1/nodes/testkubernetes-control-plane?timeout=10s 200 OK in 2 milliseconds
        [upload-certs] Skipping phase. Please see --upload-certs
        [mark-control-plane] Marking the node testkubernetes-control-plane as control-plane by adding the labels: [node-role.kubernetes.io/master(deprecated) node-role.kubernetes.io/control-plane node.kubernetes.io/exclude-from-external-load-balancers]
        [mark-control-plane] Marking the node testkubernetes-control-plane as control-plane by adding the taints [node-role.kubernetes.io/master:NoSchedule]
        I1208 20:23:28.575724     218 round_trippers.go:454] GET https://testkubernetes-control-plane:6443/api/v1/nodes/testkubernetes-control-plane?timeout=10s 200 OK in 1 milliseconds
        I1208 20:23:28.582432     218 round_trippers.go:454] PATCH https://testkubernetes-control-plane:6443/api/v1/nodes/testkubernetes-control-plane?timeout=10s 200 OK in 6 milliseconds
        [bootstrap-token] Configuring bootstrap tokens, cluster-info ConfigMap, RBAC Roles
        I1208 20:23:28.586934     218 round_trippers.go:454] GET https://testkubernetes-control-plane:6443/api/v1/namespaces/kube-system/secrets/bootstrap-token-abcdef?timeout=10s 404 Not Found in 4 milliseconds
        I1208 20:23:28.590192     218 round_trippers.go:454] POST https://testkubernetes-control-plane:6443/api/v1/namespaces/kube-system/secrets?timeout=10s 201 Created in 2 milliseconds
        [bootstrap-token] configured RBAC rules to allow Node Bootstrap tokens to get nodes
        I1208 20:23:28.593194     218 round_trippers.go:454] POST https://testkubernetes-control-plane:6443/apis/rbac.authorization.k8s.io/v1/clusterroles?timeout=10s 201 Created in 2 milliseconds
        I1208 20:23:28.595546     218 round_trippers.go:454] POST https://testkubernetes-control-plane:6443/apis/rbac.authorization.k8s.io/v1/clusterrolebindings?timeout=10s 201 Created in 1 milliseconds
        [bootstrap-token] configured RBAC rules to allow Node Bootstrap tokens to post CSRs in order for nodes to get long term certificate credentials
        I1208 20:23:28.596671     218 round_trippers.go:454] POST https://testkubernetes-control-plane:6443/apis/rbac.authorization.k8s.io/v1/clusterrolebindings?timeout=10s 201 Created in 0 milliseconds
        [bootstrap-token] configured RBAC rules to allow the csrapprover controller automatically approve CSRs from a Node Bootstrap Token
        I1208 20:23:28.597654     218 round_trippers.go:454] POST https://testkubernetes-control-plane:6443/apis/rbac.authorization.k8s.io/v1/clusterrolebindings?timeout=10s 201 Created in 0 milliseconds
        [bootstrap-token] configured RBAC rules to allow certificate rotation for all node client certificates in the cluster
        I1208 20:23:28.598829     218 round_trippers.go:454] POST https://testkubernetes-control-plane:6443/apis/rbac.authorization.k8s.io/v1/clusterrolebindings?timeout=10s 201 Created in 1 milliseconds
        [bootstrap-token] Creating the "cluster-info" ConfigMap in the "kube-public" namespace
        I1208 20:23:28.598900     218 clusterinfo.go:45] [bootstrap-token] loading admin kubeconfig
        I1208 20:23:28.599263     218 loader.go:372] Config loaded from file:  /etc/kubernetes/admin.conf
        I1208 20:23:28.599272     218 clusterinfo.go:56] [bootstrap-token] copying the cluster from admin.conf to the bootstrap kubeconfig
        I1208 20:23:28.599510     218 clusterinfo.go:68] [bootstrap-token] creating/updating ConfigMap in kube-public namespace
        I1208 20:23:28.600956     218 round_trippers.go:454] POST https://testkubernetes-control-plane:6443/api/v1/namespaces/kube-public/configmaps?timeout=10s 201 Created in 1 milliseconds
        I1208 20:23:28.601073     218 clusterinfo.go:82] creating the RBAC rules for exposing the cluster-info ConfigMap in the kube-public namespace
        I1208 20:23:28.602599     218 round_trippers.go:454] POST https://testkubernetes-control-plane:6443/apis/rbac.authorization.k8s.io/v1/namespaces/kube-public/roles?timeout=10s 201 Created in 1 milliseconds
        I1208 20:23:28.603875     218 round_trippers.go:454] POST https://testkubernetes-control-plane:6443/apis/rbac.authorization.k8s.io/v1/namespaces/kube-public/rolebindings?timeout=10s 201 Created in 1 milliseconds
        I1208 20:23:28.603961     218 kubeletfinalize.go:88] [kubelet-finalize] Assuming that kubelet client certificate rotation is enabled: found "/var/lib/kubelet/pki/kubelet-client-current.pem"
        [kubelet-finalize] Updating "/etc/kubernetes/kubelet.conf" to point to a rotatable kubelet client certificate and key
        I1208 20:23:28.604201     218 loader.go:372] Config loaded from file:  /etc/kubernetes/kubelet.conf
        I1208 20:23:28.604434     218 kubeletfinalize.go:132] [kubelet-finalize] Restarting the kubelet to enable client certificate rotation
        I1208 20:23:28.725299     218 round_trippers.go:454] GET https://testkubernetes-control-plane:6443/apis/apps/v1/namespaces/kube-system/deployments?labelSelector=k8s-app%3Dkube-dns 200 OK in 2 milliseconds
        I1208 20:23:28.729481     218 round_trippers.go:454] GET https://testkubernetes-control-plane:6443/api/v1/namespaces/kube-system/configmaps/coredns?timeout=10s 404 Not Found in 1 milliseconds
        I1208 20:23:28.730976     218 round_trippers.go:454] POST https://testkubernetes-control-plane:6443/api/v1/namespaces/kube-system/configmaps?timeout=10s 201 Created in 1 milliseconds
        I1208 20:23:28.732265     218 round_trippers.go:454] POST https://testkubernetes-control-plane:6443/apis/rbac.authorization.k8s.io/v1/clusterroles?timeout=10s 201 Created in 1 milliseconds
        I1208 20:23:28.733493     218 round_trippers.go:454] POST https://testkubernetes-control-plane:6443/apis/rbac.authorization.k8s.io/v1/clusterrolebindings?timeout=10s 201 Created in 1 milliseconds
        I1208 20:23:28.737222     218 round_trippers.go:454] POST https://testkubernetes-control-plane:6443/api/v1/namespaces/kube-system/serviceaccounts?timeout=10s 201 Created in 3 milliseconds
        I1208 20:23:28.750435     218 round_trippers.go:454] POST https://testkubernetes-control-plane:6443/apis/apps/v1/namespaces/kube-system/deployments?timeout=10s 201 Created in 7 milliseconds
        I1208 20:23:28.754784     218 round_trippers.go:454] POST https://testkubernetes-control-plane:6443/api/v1/namespaces/kube-system/services?timeout=10s 201 Created in 3 milliseconds
        [addons] Applied essential addon: CoreDNS
        I1208 20:23:28.755886     218 round_trippers.go:454] POST https://testkubernetes-control-plane:6443/api/v1/namespaces/kube-system/serviceaccounts?timeout=10s 201 Created in 0 milliseconds
        I1208 20:23:28.775880     218 round_trippers.go:454] POST https://testkubernetes-control-plane:6443/api/v1/namespaces/kube-system/configmaps?timeout=10s 201 Created in 1 milliseconds
        I1208 20:23:28.782827     218 round_trippers.go:454] POST https://testkubernetes-control-plane:6443/apis/apps/v1/namespaces/kube-system/daemonsets?timeout=10s 201 Created in 4 milliseconds
        I1208 20:23:28.784838     218 round_trippers.go:454] POST https://testkubernetes-control-plane:6443/apis/rbac.authorization.k8s.io/v1/clusterrolebindings?timeout=10s 201 Created in 1 milliseconds
        I1208 20:23:28.792273     218 round_trippers.go:454] POST https://testkubernetes-control-plane:6443/apis/rbac.authorization.k8s.io/v1/namespaces/kube-system/roles?timeout=10s 201 Created in 1 milliseconds
        I1208 20:23:28.991702     218 request.go:600] Waited for 199.28569ms due to client-side throttling, not priority and fairness, request: POST:https://testkubernetes-control-plane:6443/apis/rbac.authorization.k8s.io/v1/namespaces/kube-system/rolebindings?timeout=10s
        I1208 20:23:28.993087     218 round_trippers.go:454] POST https://testkubernetes-control-plane:6443/apis/rbac.authorization.k8s.io/v1/namespaces/kube-system/rolebindings?timeout=10s 201 Created in 1 milliseconds
        [addons] Applied essential addon: kube-proxy
        I1208 20:23:28.993433     218 loader.go:372] Config loaded from file:  /etc/kubernetes/admin.conf
        I1208 20:23:28.993713     218 loader.go:372] Config loaded from file:  /etc/kubernetes/admin.conf
        
        Your Kubernetes control-plane has initialized successfully!
        
        To start using your cluster, you need to run the following as a regular user:
        
          mkdir -p $HOME/.kube
          sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
          sudo chown $(id -u):$(id -g) $HOME/.kube/config
        
        Alternatively, if you are the root user, you can run:
        
          export KUBECONFIG=/etc/kubernetes/admin.conf
        
        You should now deploy a pod network to the cluster.
        Run "kubectl apply -f [podnetwork].yaml" with one of the options listed at:
          https://kubernetes.io/docs/concepts/cluster-administration/addons/
        
        You can now join any number of control-plane nodes by copying certificate authorities
        and service account keys on each node and then running the following as root:
        
          kubeadm join testkubernetes-control-plane:6443 --token <value withheld> \
        	--discovery-token-ca-cert-hash sha256:08baa1b483c219dce7d9774211de97c0b225f0b63ba10e2eb443f8611ae9e0a7 \
        	--control-plane 
        
        Then you can join any number of worker nodes by running the following on each as root:
        
        kubeadm join testkubernetes-control-plane:6443 --token <value withheld> \
        	--discovery-token-ca-cert-hash sha256:08baa1b483c219dce7d9774211de97c0b225f0b63ba10e2eb443f8611ae9e0a7 
    status.go:84:  ✓ Starting control-plane 🕹️
    status.go:68:  • Installing CNI 🔌  ...
    cni.go:120: Using the following Kindnetd config:
        null
        ---
        apiVersion: rbac.authorization.k8s.io/v1
        kind: ClusterRole
        metadata:
          name: kindnet
        rules:
        - apiGroups:
          - policy
          resourceNames:
          - kindnet
          resources:
          - podsecuritypolicies
          verbs:
          - use
        - apiGroups:
          - ""
          resources:
          - nodes
          verbs:
          - list
          - watch
        ---
        apiVersion: rbac.authorization.k8s.io/v1
        kind: ClusterRoleBinding
        metadata:
          name: kindnet
        roleRef:
          apiGroup: rbac.authorization.k8s.io
          kind: ClusterRole
          name: kindnet
        subjects:
        - kind: ServiceAccount
          name: kindnet
          namespace: kube-system
        ---
        apiVersion: v1
        kind: ServiceAccount
        metadata:
          name: kindnet
          namespace: kube-system
        ---
        apiVersion: apps/v1
        kind: DaemonSet
        metadata:
          labels:
            app: kindnet
            k8s-app: kindnet
            tier: node
          name: kindnet
          namespace: kube-system
        spec:
          selector:
            matchLabels:
              app: kindnet
          template:
            metadata:
              labels:
                app: kindnet
                k8s-app: kindnet
                tier: node
            spec:
              containers:
              - env:
                - name: HOST_IP
                  valueFrom:
                    fieldRef:
                      fieldPath: status.hostIP
                - name: POD_IP
                  valueFrom:
                    fieldRef:
                      fieldPath: status.podIP
                - name: POD_SUBNET
                  value: 10.244.0.0/16
                - name: CONTROL_PLANE_ENDPOINT
                  value: testkubernetes-control-plane:6443
                image: docker.io/kindest/kindnetd:v20210326-1e038dc5
                name: kindnet-cni
                resources:
                  limits:
                    cpu: 100m
                    memory: 50Mi
                  requests:
                    cpu: 100m
                    memory: 50Mi
                securityContext:
                  capabilities:
                    add:
                    - NET_RAW
                    - NET_ADMIN
                  privileged: false
                volumeMounts:
                - mountPath: /etc/cni/net.d
                  name: cni-cfg
                - mountPath: /run/xtables.lock
                  name: xtables-lock
                  readOnly: false
                - mountPath: /lib/modules
                  name: lib-modules
                  readOnly: true
              hostNetwork: true
              serviceAccountName: kindnet
              tolerations:
              - operator: Exists
              volumes:
              - hostPath:
                  path: /etc/cni/net.d
                name: cni-cfg
              - hostPath:
                  path: /run/xtables.lock
                  type: FileOrCreate
                name: xtables-lock
              - hostPath:
                  path: /lib/modules
                name: lib-modules
    status.go:84:  ✓ Installing CNI 🔌
    status.go:68:  • Installing StorageClass 💾  ...
    status.go:84:  ✓ Installing StorageClass 💾
    status.go:68:  • Waiting ≤ 9m54s for control-plane = Ready ⏳  ...
    status.go:84:  ✓ Waiting ≤ 9m54s for control-plane = Ready ⏳
    waitforready.go:78:  • Ready after 20s 💚
    kubernetes_test.go:16: Kubernetes cluster is now ready for use at https://127.0.0.1:42435
    kubernetes.go:94: Bringing up canary pod to test if Kubernetes is ready...
    kubernetes.go:137: Canary pod is not yet ready, retrying in 1 second...
    kubernetes.go:137: Canary pod is not yet ready, retrying in 1 second...
    kubernetes.go:137: Canary pod is not yet ready, retrying in 1 second...
    kubernetes.go:137: Canary pod is not yet ready, retrying in 1 second...
    kubernetes.go:137: Canary pod is not yet ready, retrying in 1 second...
    kubernetes.go:137: Canary pod is not yet ready, retrying in 1 second...
    kubernetes.go:137: Canary pod is not yet ready, retrying in 1 second...
    kubernetes.go:137: Canary pod is not yet ready, retrying in 1 second...
    kubernetes.go:137: Canary pod is not yet ready, retrying in 1 second...
    kubernetes.go:137: Canary pod is not yet ready, retrying in 1 second...
    kubernetes.go:137: Canary pod is not yet ready, retrying in 1 second...
    kubernetes.go:137: Canary pod is not yet ready, retrying in 1 second...
    kubernetes.go:137: Canary pod is not yet ready, retrying in 1 second...
    kubernetes_test.go:37: Server version is v1.21.1
    kubernetes.go:214: Test finished, removing Kubernetes cluster...
    kubernetes.go:218: Kubernetes cluster removed.
--- PASS: TestKubernetes (58.24s)
=== RUN   TestKubernetesModeSwitch
--- FAIL: TestKubernetesModeSwitch (0.00s)
panic: runtime error: index out of range [0] with length 0 [recovered]
	panic: runtime error: index out of range [0] with length 0

goroutine 583 [running]:
testing.tRunner.func1.2({0x161f3e0, 0xc0007643a8})
	/usr/local/lib/go/src/testing/testing.go:1209 +0x24e
testing.tRunner.func1()
	/usr/local/lib/go/src/testing/testing.go:1212 +0x218
panic({0x161f3e0, 0xc0007643a8})
	/usr/local/lib/go/src/runtime/panic.go:1038 +0x215
github.com/containerssh/libcontainerssh/internal/test.kubeConfig.getContext({{0xc000455f08, 0x2}, {0x0, 0x0, 0x0}, {0x0, 0x0, 0x0}, {0x0, 0x0}, ...}, ...)
	/home/janosdebugs/GolandProjects/libcontainerssh/internal/test/kubernetes.go:308 +0xe5
github.com/containerssh/libcontainerssh/internal/test.kubeConfig.getUser({{0xc000455f08, 0x2}, {0x0, 0x0, 0x0}, {0x0, 0x0, 0x0}, {0x0, 0x0}, ...}, ...)
	/home/janosdebugs/GolandProjects/libcontainerssh/internal/test/kubernetes.go:334 +0xa5
github.com/containerssh/libcontainerssh/internal/test.Kubernetes(0xc0000be680)
	/home/janosdebugs/GolandProjects/libcontainerssh/internal/test/kubernetes.go:47 +0x225
github.com/containerssh/libcontainerssh/internal/test_test.TestKubernetesModeSwitch(0xc0000be680)
	/home/janosdebugs/GolandProjects/libcontainerssh/internal/test/kubernetes_test.go:43 +0x36
testing.tRunner(0xc0000be680, 0x17be738)
	/usr/local/lib/go/src/testing/testing.go:1259 +0x102
created by testing.(*T).Run
	/usr/local/lib/go/src/testing/testing.go:1306 +0x35a
FAIL	github.com/containerssh/libcontainerssh/internal/test	63.878s
=== RUN   TestParseCMD
--- PASS: TestParseCMD (0.00s)
PASS
ok  	github.com/containerssh/libcontainerssh/internal/unixutils	0.001s
=== RUN   TestGoLog
--- PASS: TestGoLog (0.00s)
=== RUN   TestLogLevelFiltering
=== RUN   TestLogLevelFiltering/filter=emerg
=== RUN   TestLogLevelFiltering/filter=emerg/write=emerg
=== RUN   TestLogLevelFiltering/filter=emerg/write=alert
=== RUN   TestLogLevelFiltering/filter=emerg/write=crit
=== RUN   TestLogLevelFiltering/filter=emerg/write=error
=== RUN   TestLogLevelFiltering/filter=emerg/write=warning
=== RUN   TestLogLevelFiltering/filter=emerg/write=notice
=== RUN   TestLogLevelFiltering/filter=emerg/write=info
=== RUN   TestLogLevelFiltering/filter=emerg/write=debug
=== RUN   TestLogLevelFiltering/filter=alert
=== RUN   TestLogLevelFiltering/filter=alert/write=emerg
=== RUN   TestLogLevelFiltering/filter=alert/write=alert
=== RUN   TestLogLevelFiltering/filter=alert/write=crit
=== RUN   TestLogLevelFiltering/filter=alert/write=error
=== RUN   TestLogLevelFiltering/filter=alert/write=warning
=== RUN   TestLogLevelFiltering/filter=alert/write=notice
=== RUN   TestLogLevelFiltering/filter=alert/write=info
=== RUN   TestLogLevelFiltering/filter=alert/write=debug
=== RUN   TestLogLevelFiltering/filter=crit
=== RUN   TestLogLevelFiltering/filter=crit/write=emerg
=== RUN   TestLogLevelFiltering/filter=crit/write=alert
=== RUN   TestLogLevelFiltering/filter=crit/write=crit
=== RUN   TestLogLevelFiltering/filter=crit/write=error
=== RUN   TestLogLevelFiltering/filter=crit/write=warning
=== RUN   TestLogLevelFiltering/filter=crit/write=notice
=== RUN   TestLogLevelFiltering/filter=crit/write=info
=== RUN   TestLogLevelFiltering/filter=crit/write=debug
=== RUN   TestLogLevelFiltering/filter=error
=== RUN   TestLogLevelFiltering/filter=error/write=emerg
=== RUN   TestLogLevelFiltering/filter=error/write=alert
=== RUN   TestLogLevelFiltering/filter=error/write=crit
=== RUN   TestLogLevelFiltering/filter=error/write=error
=== RUN   TestLogLevelFiltering/filter=error/write=warning
=== RUN   TestLogLevelFiltering/filter=error/write=notice
=== RUN   TestLogLevelFiltering/filter=error/write=info
=== RUN   TestLogLevelFiltering/filter=error/write=debug
=== RUN   TestLogLevelFiltering/filter=warning
=== RUN   TestLogLevelFiltering/filter=warning/write=emerg
=== RUN   TestLogLevelFiltering/filter=warning/write=alert
=== RUN   TestLogLevelFiltering/filter=warning/write=crit
=== RUN   TestLogLevelFiltering/filter=warning/write=error
=== RUN   TestLogLevelFiltering/filter=warning/write=warning
=== RUN   TestLogLevelFiltering/filter=warning/write=notice
=== RUN   TestLogLevelFiltering/filter=warning/write=info
=== RUN   TestLogLevelFiltering/filter=warning/write=debug
=== RUN   TestLogLevelFiltering/filter=notice
=== RUN   TestLogLevelFiltering/filter=notice/write=emerg
=== RUN   TestLogLevelFiltering/filter=notice/write=alert
=== RUN   TestLogLevelFiltering/filter=notice/write=crit
=== RUN   TestLogLevelFiltering/filter=notice/write=error
=== RUN   TestLogLevelFiltering/filter=notice/write=warning
=== RUN   TestLogLevelFiltering/filter=notice/write=notice
=== RUN   TestLogLevelFiltering/filter=notice/write=info
=== RUN   TestLogLevelFiltering/filter=notice/write=debug
=== RUN   TestLogLevelFiltering/filter=info
=== RUN   TestLogLevelFiltering/filter=info/write=emerg
=== RUN   TestLogLevelFiltering/filter=info/write=alert
=== RUN   TestLogLevelFiltering/filter=info/write=crit
=== RUN   TestLogLevelFiltering/filter=info/write=error
=== RUN   TestLogLevelFiltering/filter=info/write=warning
=== RUN   TestLogLevelFiltering/filter=info/write=notice
=== RUN   TestLogLevelFiltering/filter=info/write=info
=== RUN   TestLogLevelFiltering/filter=info/write=debug
=== RUN   TestLogLevelFiltering/filter=debug
=== RUN   TestLogLevelFiltering/filter=debug/write=emerg
=== RUN   TestLogLevelFiltering/filter=debug/write=alert
=== RUN   TestLogLevelFiltering/filter=debug/write=crit
=== RUN   TestLogLevelFiltering/filter=debug/write=error
=== RUN   TestLogLevelFiltering/filter=debug/write=warning
=== RUN   TestLogLevelFiltering/filter=debug/write=notice
=== RUN   TestLogLevelFiltering/filter=debug/write=info
=== RUN   TestLogLevelFiltering/filter=debug/write=debug
--- PASS: TestLogLevelFiltering (0.00s)
    --- PASS: TestLogLevelFiltering/filter=emerg (0.00s)
        --- PASS: TestLogLevelFiltering/filter=emerg/write=emerg (0.00s)
        --- PASS: TestLogLevelFiltering/filter=emerg/write=alert (0.00s)
        --- PASS: TestLogLevelFiltering/filter=emerg/write=crit (0.00s)
        --- PASS: TestLogLevelFiltering/filter=emerg/write=error (0.00s)
        --- PASS: TestLogLevelFiltering/filter=emerg/write=warning (0.00s)
        --- PASS: TestLogLevelFiltering/filter=emerg/write=notice (0.00s)
        --- PASS: TestLogLevelFiltering/filter=emerg/write=info (0.00s)
        --- PASS: TestLogLevelFiltering/filter=emerg/write=debug (0.00s)
    --- PASS: TestLogLevelFiltering/filter=alert (0.00s)
        --- PASS: TestLogLevelFiltering/filter=alert/write=emerg (0.00s)
        --- PASS: TestLogLevelFiltering/filter=alert/write=alert (0.00s)
        --- PASS: TestLogLevelFiltering/filter=alert/write=crit (0.00s)
        --- PASS: TestLogLevelFiltering/filter=alert/write=error (0.00s)
        --- PASS: TestLogLevelFiltering/filter=alert/write=warning (0.00s)
        --- PASS: TestLogLevelFiltering/filter=alert/write=notice (0.00s)
        --- PASS: TestLogLevelFiltering/filter=alert/write=info (0.00s)
        --- PASS: TestLogLevelFiltering/filter=alert/write=debug (0.00s)
    --- PASS: TestLogLevelFiltering/filter=crit (0.00s)
        --- PASS: TestLogLevelFiltering/filter=crit/write=emerg (0.00s)
        --- PASS: TestLogLevelFiltering/filter=crit/write=alert (0.00s)
        --- PASS: TestLogLevelFiltering/filter=crit/write=crit (0.00s)
        --- PASS: TestLogLevelFiltering/filter=crit/write=error (0.00s)
        --- PASS: TestLogLevelFiltering/filter=crit/write=warning (0.00s)
        --- PASS: TestLogLevelFiltering/filter=crit/write=notice (0.00s)
        --- PASS: TestLogLevelFiltering/filter=crit/write=info (0.00s)
        --- PASS: TestLogLevelFiltering/filter=crit/write=debug (0.00s)
    --- PASS: TestLogLevelFiltering/filter=error (0.00s)
        --- PASS: TestLogLevelFiltering/filter=error/write=emerg (0.00s)
        --- PASS: TestLogLevelFiltering/filter=error/write=alert (0.00s)
        --- PASS: TestLogLevelFiltering/filter=error/write=crit (0.00s)
        --- PASS: TestLogLevelFiltering/filter=error/write=error (0.00s)
        --- PASS: TestLogLevelFiltering/filter=error/write=warning (0.00s)
        --- PASS: TestLogLevelFiltering/filter=error/write=notice (0.00s)
        --- PASS: TestLogLevelFiltering/filter=error/write=info (0.00s)
        --- PASS: TestLogLevelFiltering/filter=error/write=debug (0.00s)
    --- PASS: TestLogLevelFiltering/filter=warning (0.00s)
        --- PASS: TestLogLevelFiltering/filter=warning/write=emerg (0.00s)
        --- PASS: TestLogLevelFiltering/filter=warning/write=alert (0.00s)
        --- PASS: TestLogLevelFiltering/filter=warning/write=crit (0.00s)
        --- PASS: TestLogLevelFiltering/filter=warning/write=error (0.00s)
        --- PASS: TestLogLevelFiltering/filter=warning/write=warning (0.00s)
        --- PASS: TestLogLevelFiltering/filter=warning/write=notice (0.00s)
        --- PASS: TestLogLevelFiltering/filter=warning/write=info (0.00s)
        --- PASS: TestLogLevelFiltering/filter=warning/write=debug (0.00s)
    --- PASS: TestLogLevelFiltering/filter=notice (0.00s)
        --- PASS: TestLogLevelFiltering/filter=notice/write=emerg (0.00s)
        --- PASS: TestLogLevelFiltering/filter=notice/write=alert (0.00s)
        --- PASS: TestLogLevelFiltering/filter=notice/write=crit (0.00s)
        --- PASS: TestLogLevelFiltering/filter=notice/write=error (0.00s)
        --- PASS: TestLogLevelFiltering/filter=notice/write=warning (0.00s)
        --- PASS: TestLogLevelFiltering/filter=notice/write=notice (0.00s)
        --- PASS: TestLogLevelFiltering/filter=notice/write=info (0.00s)
        --- PASS: TestLogLevelFiltering/filter=notice/write=debug (0.00s)
    --- PASS: TestLogLevelFiltering/filter=info (0.00s)
        --- PASS: TestLogLevelFiltering/filter=info/write=emerg (0.00s)
        --- PASS: TestLogLevelFiltering/filter=info/write=alert (0.00s)
        --- PASS: TestLogLevelFiltering/filter=info/write=crit (0.00s)
        --- PASS: TestLogLevelFiltering/filter=info/write=error (0.00s)
        --- PASS: TestLogLevelFiltering/filter=info/write=warning (0.00s)
        --- PASS: TestLogLevelFiltering/filter=info/write=notice (0.00s)
        --- PASS: TestLogLevelFiltering/filter=info/write=info (0.00s)
        --- PASS: TestLogLevelFiltering/filter=info/write=debug (0.00s)
    --- PASS: TestLogLevelFiltering/filter=debug (0.00s)
        --- PASS: TestLogLevelFiltering/filter=debug/write=emerg (0.00s)
        --- PASS: TestLogLevelFiltering/filter=debug/write=alert (0.00s)
        --- PASS: TestLogLevelFiltering/filter=debug/write=crit (0.00s)
        --- PASS: TestLogLevelFiltering/filter=debug/write=error (0.00s)
        --- PASS: TestLogLevelFiltering/filter=debug/write=warning (0.00s)
        --- PASS: TestLogLevelFiltering/filter=debug/write=notice (0.00s)
        --- PASS: TestLogLevelFiltering/filter=debug/write=info (0.00s)
        --- PASS: TestLogLevelFiltering/filter=debug/write=debug (0.00s)
PASS
ok  	github.com/containerssh/libcontainerssh/log	0.004s
?   	github.com/containerssh/libcontainerssh/message	[no test files]
=== RUN   TestLifecycle
--- PASS: TestLifecycle (0.00s)
=== RUN   TestCrash
--- PASS: TestCrash (0.00s)
=== RUN   TestEmptyPool
    pool_impl.go:49: info	Services are starting...
    pool_impl.go:91: info	All services are now running.
    pool_impl.go:101: info	Services are now stopping...
    pool_impl.go:85: info	All services have stopped.
--- PASS: TestEmptyPool (0.00s)
=== RUN   TestOneService
    pool_impl.go:49: info	Services are starting...
    pool_impl.go:135: info	Test service is starting...
    pool_impl.go:138: info	Test service is running.
    pool_impl.go:91: info	All services are now running.
    pool_impl.go:101: info	Services are now stopping...
    pool_impl.go:144: info	Test service is stopping...
    pool_impl.go:147: info	Test service has stopped.
    pool_impl.go:85: info	All services have stopped.
--- PASS: TestOneService (0.00s)
=== RUN   TestOneServiceCrash
    pool_impl.go:49: info	Services are starting...
    pool_impl.go:135: info	Test service is starting...
    pool_impl.go:138: info	Test service is running.
    pool_impl.go:91: info	All services are now running.
    pool_impl.go:151: error	Test service has crashed.
    pool_impl.go:98: info	Services are now stopping...
    pool_impl.go:85: info	All services have stopped.
--- PASS: TestOneServiceCrash (0.00s)
=== RUN   TestOneServiceStartupCrash
    pool_impl.go:49: info	Services are starting...
    pool_impl.go:135: info	Test service is starting...
    pool_impl.go:151: error	Test service has crashed.
    pool_impl.go:106: info	Services are now stopping...
    pool_impl.go:85: info	All services have stopped.
--- PASS: TestOneServiceStartupCrash (0.00s)
=== RUN   TestTwoServices
    pool_impl.go:49: info	Services are starting...
    pool_impl.go:135: info	Test service 2 is starting...
    pool_impl.go:135: info	Test service 1 is starting...
    pool_impl.go:138: info	Test service 1 is running.
    pool_impl.go:138: info	Test service 2 is running.
    pool_impl.go:91: info	All services are now running.
    pool_impl.go:101: info	Services are now stopping...
    pool_impl.go:144: info	Test service 2 is stopping...
    pool_impl.go:144: info	Test service 1 is stopping...
    pool_impl.go:147: info	Test service 2 has stopped.
    pool_impl.go:147: info	Test service 1 has stopped.
    pool_impl.go:85: info	All services have stopped.
--- PASS: TestTwoServices (0.00s)
=== RUN   TestTwoServicesOneCrashed
    pool_impl.go:49: info	Services are starting...
    pool_impl.go:135: info	Test service 2 is starting...
    pool_impl.go:135: info	Test service 1 is starting...
    pool_impl.go:138: info	Test service 2 is running.
    pool_impl.go:138: info	Test service 1 is running.
    pool_impl.go:91: info	All services are now running.
    pool_impl.go:151: error	Test service 1 has crashed.
    pool_impl.go:144: info	Test service 2 is stopping...
    pool_impl.go:147: info	Test service 2 has stopped.
    pool_impl.go:98: info	Services are now stopping...
    pool_impl.go:85: info	All services have stopped.
--- PASS: TestTwoServicesOneCrashed (0.00s)
=== RUN   TestTwoServicesOneTerminatedDuringStartup
    pool_impl.go:49: info	Services are starting...
    pool_impl.go:135: info	Test service 2 is starting...
    pool_impl.go:135: info	Test service 1 is starting...
    pool_impl.go:138: info	Test service 2 is running.
    pool_impl.go:151: error	Test service 1 has crashed.
    pool_impl.go:144: info	Test service 2 is stopping...
    pool_impl.go:147: info	Test service 2 has stopped.
    pool_impl.go:106: info	Services are now stopping...
    pool_impl.go:85: info	All services have stopped.
--- PASS: TestTwoServicesOneTerminatedDuringStartup (0.00s)
PASS
ok  	github.com/containerssh/libcontainerssh/service	0.004s
FAIL
